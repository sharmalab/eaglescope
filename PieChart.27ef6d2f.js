parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"j1BH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("react")),t=u(require("d3")),r=n(require("prop-types")),a=n(require("../../partials/tooltip"));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var l=n?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=e[u]}return a.default=e,r&&r.set(e,a),a}function l(r){var n=(0,e.useRef)(),i=5,u=5,l=5,o=5,d=t.nest().key(function(e){return e[r.fields.x]}).rollup(function(e){return e.length}).entries(r.data),c=t.sum(d,function(e){return e.value}),f=t.pie().sortValues(function(e,t){return t-e}).value(function(e){return e.value})(d);return(0,e.useEffect)(function(){setTimeout(function(){t.select(n.current).select(".tooltip").remove(".tooltip"),t.select(n.current).selectAll("svg").remove("svg");var e=n.current.getBoundingClientRect(),s=e.width-o-u,p=e.height-i-l,h=Math.min(s,p)/2,v=t.arc().innerRadius(0).outerRadius(h),y=t.scaleOrdinal().domain(d.map(function(e){return e.key})).range(t.quantize(function(e){return t.interpolateSpectral(e)},d.length)),g=t.select(n.current).append("svg").attr("width",e.width).attr("height",e.height),m=g.append("g").attr("transform","translate(".concat(s/2+o,",").concat(p/2+i,")"));if(s>500){var k=g.selectAll(".legend").data(f).enter().append("g").attr("transform",function(e,t){return"translate(".concat(s-110,",").concat(15*t+20,")")}).attr("class","legend");k.append("rect").attr("width",13).attr("height",13).attr("fill",function(e,t){return y(t)}).attr("stroke","grey").style("stroke-width","1px"),k.append("text").text(function(e){return"".concat(e.value,"  ").concat(e.data.key)}).style("font-size",15).attr("y",13).attr("x",15)}var R={x:e.width/2+20,y:e.height/2},q=(0,a.default)(n.current,function(e){return"Class: ".concat(e.data.key," Count: ").concat(e.data.value," \n      Percentage: ").concat(t.format(".0%")(e.data.value/c))},R),w=m.selectAll("path").data(f).join("path").attr("class","slide").attr("fill",function(e){return y(e.data.key)}).attr("d",v).on("mousemove",q.mousemove).on("mouseleave",q.mouseleave).on("click",function(e){e.data.selected=!e.data.selected;var t=d.reduce(function(e,t){return t.selected&&e.push(t.key),e},[]);if(t.length>0){var a={id:r.id,title:r.title,field:r.fields.x,operation:"in",values:t};r.filterAdded([a])}else r.filterRemove(r.id)}),C=r.filters.filter(function(e){return e.id===r.id});C.length>0&&C[0].values.forEach(function(e){d.forEach(function(t){t.key===e&&(t.selected=!0)})}),C.length>0?w.attr("fill",function(e){return e.data.selected?y(e.data.key):"#C0C0C0"}).attr("fill-opacity",function(e){return e.data.selected?1:.5}).attr("stroke","#CCCCCC").attr("stroke-width",function(e){return e.data.selected?3:0}):(d.forEach(function(e){e.selected=!1}),w.attr("fill",function(e){return y(e.data.key)}).attr("fill-opacity",1).attr("stroke","none"))},100)},[r.layout,r.filters]),e.default.createElement("div",{style:{width:"100%",height:"100%"}},e.default.createElement("div",{role:"figure",id:r.id,ref:n,style:{width:"100%",height:"100%"}}))}var o=exports.default=l;l.propTypes={data:r.default.arrayOf(r.default.shape({})).isRequired,fields:r.default.shape({x:r.default.string.isRequired}).isRequired,id:r.default.string.isRequired,title:r.default.string.isRequired,filters:r.default.arrayOf(r.default.shape({})).isRequired,filterAdded:r.default.func.isRequired,filterRemove:r.default.func.isRequired,layout:r.default.shape({width:r.default.number.isRequired,currentCols:r.default.number.isRequired}).isRequired};
},{"react":"n8MK","d3":"UzF0","prop-types":"D9Od","../../partials/tooltip":"nEAV"}]},{},[], null)
//# sourceMappingURL=PieChart.27ef6d2f.js.map