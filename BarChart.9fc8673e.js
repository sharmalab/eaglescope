function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,i){Object.defineProperty(e,t,{get:r,set:i,enumerable:!0,configurable:!0})}var r=globalThis.parcelRequire94c2,i=r.register;i("lOjvX",function(i,a){Object.defineProperty(i.exports,"__esModule",{value:!0,configurable:!0}),t(i.exports,"default",()=>y);var s=r("ayMG0"),l=r("acw62"),n=r("9NlP8"),o=r("c9Z8w"),u=r("bN8Lq");let d=(e,t)=>{let r=new Map;return e.forEach(e=>{let i=e[t];Array.isArray(i)?i.forEach(e=>{r.has(e)||r.set(e,0),r.set(e,r.get(e)+1)}):(r.has(i)||r.set(i,0),r.set(i,r.get(i)+1))}),Array.from(r).map(e=>({key:e[0],value:e[1]}))},c=(e,t,r=!1)=>{if(r)return d(e,t);let i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return n.nest().key(e=>e[t]).sortKeys(function(e,t){return i.compare(e,t)}).rollup(e=>e.length).entries(e)},p=(e,t)=>{e.each(function(){let e;let r=n.select(this),i=r.text().split(/\s+/).reverse(),a=[],s=0,l=r.attr("y"),o=parseFloat(r.attr("dy")),u=r.text(null).append("tspan").attr("x",0).attr("y",l).attr("dy",`${o}em`);for(e=i.pop();e;)a.push(e),u.text(a.join(" ")),u.node().getComputedTextLength()>t&&(a.pop(),u.text(a.join(" ")),a=[e],u=r.append("tspan").attr("x",0).attr("y",l).attr("dy",`${1.1*++s+o}em`).text(e)),e=i.pop()})};function f(e){let t="value",r=c(e.data,e.fields.x,e.fields.isList),i=(0,l.useRef)(),a=(0,l.useRef)(),o=(0,l.useRef)(),d=(0,l.useRef)(),f=(e,t)=>n.scaleBand().domain(r.map(t=>t[e]).flat()).range([0,t]).padding(.1),y=(e,t)=>n.scaleLinear().domain([0,n.max(r,t=>t[e])]).range([t,0]),h=(r,s,l="og")=>{let n=(0,u.default)(i.current,e=>`${e.key}: ${e.value}`,{x:60,y:0}),d=r.selectAll(`rect.${l}`).data(s,e=>e.key),c=d.enter().append("rect");return c.attr("class",`${l}`).attr("x",e=>a.current.x(e.key)).attr("width",a.current.x.bandwidth()).attr("y",o.current).attr("role","graphics-symbol"),c.on("mousemove",n.mousemove).on("mouseleave",n.mouseleave).on("click",t=>{let r=c.filter(e=>e===t).data()[0].key,i=e?.fields?.isList?{id:e.id,title:e.title,field:e.fields.x,operation:"has",values:r}:{id:e.id,title:e.title,field:e.fields.x,operation:"eq",values:r};e.filterAdded([i])}),d.merge(c).transition().duration(1e3).attr("y",e=>a.current.y(e[t])).attr("height",e=>o.current-a.current.y(e[t])),d.exit().transition().duration(1e3).attr("y",o.current).attr("height",0).remove(),d};return(0,l.useEffect)(()=>{setTimeout(()=>{n.select(i.current).selectAll("svg").remove("svg");let e=i.current.getBoundingClientRect(),s=e.width-35-10,l=e.height-10-35;o.current=l;let u=n.select(i.current).append("svg").attr("width",e.width).attr("height",e.height).attr("role","img");d.current=u.append("g").attr("transform","translate(35,10)");let c=f("key",s),g=y(t,l);a.current={x:c,y:g};let m=n.axisBottom(c);d.current.append("g").attr("class","x axis").attr("transform",`translate(0,${l})`).call(m).selectAll(".tick text").call(p,c.bandwidth());let x=n.axisLeft(g).tickSize(-s);d.current.append("g").call(x),h(d.current,r,"og")},100)},[e.layout]),(0,l.useEffect)(()=>{setTimeout(()=>{let t=[];t=e.filters.length>0?c(e.filterData,e.fields.x,e.fields.isList):r,h(d.current,t,"ft")},100)},[e.filters,e.filterData,e.layout]),(0,s.jsx)("div",{id:e.id,ref:i,role:"figure",style:{width:"100%",height:"100%"}})}var y=f;f.propTypes={data:e(o).arrayOf(e(o).shape({})).isRequired,fields:e(o).shape({x:e(o).string.isRequired,isList:e(o).bool}).isRequired,id:e(o).string.isRequired,title:e(o).string.isRequired,filterData:e(o).arrayOf(e(o).shape({})).isRequired,filters:e(o).arrayOf(e(o).shape({})).isRequired,filterAdded:e(o).func.isRequired,layout:e(o).shape({width:e(o).number.isRequired,currentCols:e(o).number.isRequired}).isRequired}}),i("bN8Lq",function(e,i){t(e.exports,"default",()=>s);var a=r("9NlP8"),s=function(e,t,r){let i=a.select(e).append("div").style("opacity",1).attr("class","tooltip").style("display","none").style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");return{mousemove:function(e){i.html(t(e)).style("display","").style("left",`${r.x+a.mouse(this)[0]}px`).style("top",`${r.y+a.mouse(this)[1]}px`)},mouseleave:function(){i.style("display","none")}}}});
//# sourceMappingURL=BarChart.9fc8673e.js.map
