function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,i){Object.defineProperty(e,t,{get:r,set:i,enumerable:!0,configurable:!0})}var r=globalThis.parcelRequire94c2,i=r.register;i("2iOPo",function(i,l){Object.defineProperty(i.exports,"__esModule",{value:!0,configurable:!0}),t(i.exports,"default",()=>y);var a=r("ayMG0"),s=r("acw62"),n=r("9NlP8"),d=r("c9Z8w"),u=r("bN8Lq");let o=(e,t)=>{let r=new Map;return e.forEach(e=>{let i=e[t];Array.isArray(i)?i.forEach(e=>{r.has(e)||r.set(e,0),r.set(e,r.get(e)+1)}):(r.has(i)||r.set(i,0),r.set(i,r.get(i)+1))}),Array.from(r).map(e=>({key:e[0],value:e[1]}))},c=(e,t,r=!1)=>{if(r)return o(e,t);let i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return n.nest().key(e=>e[t]).sortKeys(function(e,t){return i.compare(e,t)}).rollup(e=>e.length).entries(e)};function f(e){let t="value",r=c(e.data,e.fields.y,e.fields.isList),i=(0,s.useRef)(),l=(0,s.useRef)(),d=(0,s.useRef)(),o=(0,s.useRef)(),f=(e,t)=>n.scaleLinear().domain([0,n.max(r,t=>t[e])]).range([0,t]),y=(e,t)=>n.scaleBand().domain(r.map(t=>t[e])).range([t,0]).padding(.1),p=()=>{o.current.selectAll(".label").remove(),o.current.selectAll(".label").data(r,e=>e.key).enter().append("text").attr("class","label").attr("x",5).attr("y",e=>l.current.y(e.key)+l.current.y.bandwidth()/2+4).text(e=>e.key).on("click",t=>{let r={id:e.id,title:e.title,field:e.fields.y,operation:"eq",values:t.key};e.filterAdded([r])})},h=(r,a,s="og")=>{let n=(0,u.default)(i.current,e=>`${e.key}: ${e.value}`,{x:30,y:10}),d=r.selectAll(`rect.${s}`).data(a,e=>e.key),o=d.enter().append("rect");return o.attr("class",`${s}`).attr("x",0).attr("height",l.current.y.bandwidth()).attr("y",e=>l.current.y(e.key)),o.on("mousemove",n.mousemove).on("mouseleave",n.mouseleave).on("click",t=>{let r=o.filter(e=>e===t).data()[0].key,i=e?.fields?.isList?{id:e.id,title:e.title,field:e.fields.y,operation:"has",values:r}:{id:e.id,title:e.title,field:e.fields.y,operation:"eq",values:r};e.filterAdded([i])}),d.merge(o).transition().duration(1e3).attr("width",e=>l.current.x(e[t])).selectAll(".label").text(e=>e.key),d.exit().transition().duration(1e3).attr("width",0).remove(),d};return(0,s.useEffect)(()=>{setTimeout(()=>{n.select(i.current).selectAll("svg").remove("svg");let e=i.current.getBoundingClientRect(),a=e.width-10-10,s=e.height-10-35;d.current=s;let u=n.select(i.current).append("svg").attr("width",e.width).attr("height",e.height);o.current=u.append("g").attr("transform","translate(10,10)");let c=f(t,a),g=y("key",s);l.current={x:c,y:g},o.current.append("g").attr("transform",`translate(0,${s})`).call(n.axisBottom(c).tickSize(-s)),h(o.current,r,"og"),p()},100)},[e.layout]),(0,s.useEffect)(()=>{setTimeout(()=>{let t=[];t=e.filters.length>0?c(e.filterData,e.fields.y,e.fields.isList):r,h(o.current,t,"ft"),p()},100)},[e.filters,e.filterData,e.layout]),(0,a.jsx)("div",{id:e.id,ref:i,role:"figure",style:{width:"100%",height:"100%"}})}var y=f;f.propTypes={data:e(d).arrayOf(e(d).shape({})).isRequired,fields:e(d).shape({y:e(d).string.isRequired,isList:e(d).bool}).isRequired,id:e(d).string.isRequired,title:e(d).string.isRequired,filterData:e(d).arrayOf(e(d).shape({})).isRequired,filters:e(d).arrayOf(e(d).shape({})).isRequired,filterAdded:e(d).func.isRequired,layout:e(d).shape({width:e(d).number.isRequired,currentCols:e(d).number.isRequired}).isRequired}}),i("bN8Lq",function(e,i){t(e.exports,"default",()=>a);var l=r("9NlP8"),a=function(e,t,r){let i=l.select(e).append("div").style("opacity",1).attr("class","tooltip").style("display","none").style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");return{mousemove:function(e){i.html(t(e)).style("display","").style("left",`${r.x+l.mouse(this)[0]}px`).style("top",`${r.y+l.mouse(this)[1]}px`)},mouseleave:function(){i.style("display","none")}}}});
//# sourceMappingURL=HorizontalBarChart.c9f80146.js.map
