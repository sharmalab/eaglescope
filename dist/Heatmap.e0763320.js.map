{"mappings":"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","sources":["<anon>","source/components/VisualTools/Chart/Heatmap.js","source/components/partials/tooltip.js"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequire94c2\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"fd07Q\", function(module, exports) {\n\"use strict\";\nfunction $b1282ad851fe5139$var$_typeof(o) {\n    \"@babel/helpers - typeof\";\n    return $b1282ad851fe5139$var$_typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(o) {\n        return typeof o;\n    } : function(o) {\n        return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, $b1282ad851fe5139$var$_typeof(o);\n}\nObject.defineProperty(module.exports, \"__esModule\", {\n    value: true\n});\nmodule.exports[\"default\"] = void 0;\n\nvar $b1282ad851fe5139$var$_react = $b1282ad851fe5139$var$_interopRequireWildcard((parcelRequire(\"acw62\")));\n\nvar $b1282ad851fe5139$var$d3 = $b1282ad851fe5139$var$_interopRequireWildcard((parcelRequire(\"9NlP8\")));\n\nvar $b1282ad851fe5139$var$_propTypes = $b1282ad851fe5139$var$_interopRequireDefault((parcelRequire(\"c9Z8w\")));\n\nvar $63tWu = parcelRequire(\"63tWu\");\n\nvar $b1282ad851fe5139$var$_tooltip = $b1282ad851fe5139$var$_interopRequireDefault((parcelRequire(\"bN8Lq\")));\nfunction $b1282ad851fe5139$var$_interopRequireDefault(e) {\n    return e && e.__esModule ? e : {\n        \"default\": e\n    };\n}\nfunction $b1282ad851fe5139$var$_getRequireWildcardCache(e) {\n    if (\"function\" != typeof WeakMap) return null;\n    var r = new WeakMap(), t = new WeakMap();\n    return ($b1282ad851fe5139$var$_getRequireWildcardCache = function _getRequireWildcardCache(e) {\n        return e ? t : r;\n    })(e);\n}\nfunction $b1282ad851fe5139$var$_interopRequireWildcard(e, r) {\n    if (!r && e && e.__esModule) return e;\n    if (null === e || \"object\" != $b1282ad851fe5139$var$_typeof(e) && \"function\" != typeof e) return {\n        \"default\": e\n    };\n    var t = $b1282ad851fe5139$var$_getRequireWildcardCache(r);\n    if (t && t.has(e)) return t.get(e);\n    var n = {\n        __proto__: null\n    }, a = Object.defineProperty && Object.getOwnPropertyDescriptor;\n    for(var u in e)if (\"default\" !== u && ({}).hasOwnProperty.call(e, u)) {\n        var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;\n        i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];\n    }\n    return n[\"default\"] = e, t && t.set(e, n), n;\n}\nfunction $b1282ad851fe5139$var$Heatmap(props) {\n    var self = (0, $b1282ad851fe5139$var$_react.useRef)();\n    var scales = {\n        x: $b1282ad851fe5139$var$d3.scaleBand(),\n        y: $b1282ad851fe5139$var$d3.scaleBand(),\n        color: $b1282ad851fe5139$var$d3.scaleSequential()\n    };\n    var margin = {\n        top: 10,\n        right: 10,\n        bottom: 30,\n        left: 60\n    };\n    var myGroups = $b1282ad851fe5139$var$d3.map(props.data, function(d) {\n        return d[props.fields.x];\n    }).keys();\n    var myVars = $b1282ad851fe5139$var$d3.map(props.data, function(d) {\n        return d[props.fields.y];\n    }).keys();\n    (0, $b1282ad851fe5139$var$_react.useEffect)(function() {\n        setTimeout(function() {\n            // Remove old svg if any\n            $b1282ad851fe5139$var$d3.select(self.current).select('.tooltip').remove('div');\n            $b1282ad851fe5139$var$d3.select(self.current).selectAll('svg').remove('svg');\n            var rect = self.current.getBoundingClientRect();\n            var innerWidth = rect.width - margin.left - margin.right;\n            var innerHeight = rect.height - margin.top - margin.bottom;\n            var data = props.data;\n            if (props.filters.length !== 0) data = props.filterData;\n            var svg = $b1282ad851fe5139$var$d3.select(self.current).append('svg').attr('width', rect.width).attr('height', rect.height).append('g').attr('transform', \"translate(\".concat(margin.left, \",\").concat(margin.top, \")\"));\n            // Create and draw x-axis\n            scales.x.range([\n                0,\n                innerWidth\n            ]).domain(myGroups).padding(0.05);\n            svg.append('g').style('font-size', 13).attr('transform', \"translate(0,\".concat(innerHeight, \")\")).call($b1282ad851fe5139$var$d3.axisBottom(scales.x).tickSize(0)).select('.domain').remove();\n            // Create and draw y-axis\n            scales.y.range([\n                innerHeight,\n                0\n            ]).domain(myVars).padding(0.05);\n            svg.append('g').style('font-size', 13).call($b1282ad851fe5139$var$d3.axisLeft(scales.y).tickSize(0)).select('.domain').remove();\n            // Create color scale\n            scales.color.interpolator($b1282ad851fe5139$var$d3.interpolateInferno).domain($b1282ad851fe5139$var$d3.extent(props.data, function(d) {\n                return d[props.fields.z];\n            }));\n            // create a tooltip\n            var addLabel = function addLabel(d) {\n                return \"The \".concat(props.fields.z, \" of this \\n      cell is: \").concat((0, $63tWu.numFixed)(d.z ? d.z : 0));\n            };\n            var offset = {\n                x: 80,\n                y: 0\n            };\n            var tooltipHandlers = (0, $b1282ad851fe5139$var$_tooltip[\"default\"])(self.current, addLabel, offset);\n            // Group data by the values of x and y\n            // then aggregate to one value using mean\n            // @TODO add option to choose different function such as: count, max, ..\n            var visData = [];\n            myGroups.forEach(function(g) {\n                return myVars.forEach(function(v) {\n                    var currentData = data.filter(function(d) {\n                        return d[props.fields.x] === g && d[props.fields.y] === v;\n                    });\n                    visData.push({\n                        g: g,\n                        v: v,\n                        z: $b1282ad851fe5139$var$d3.mean(currentData, function(d) {\n                            return d[props.fields.z];\n                        })\n                    });\n                });\n            });\n            // Draw each cell\n            svg.selectAll().data(visData, function(d) {\n                return \"\".concat(d.g, \":\").concat(d.v);\n            }).enter().append('rect').attr('x', function(d) {\n                return scales.x(d.g);\n            }).attr('y', function(d) {\n                return scales.y(d.v);\n            }).attr('rx', 4).attr('ry', 4).attr('width', scales.x.bandwidth()).attr('height', scales.y.bandwidth()).style('fill', function(d) {\n                return scales.color(d.z);\n            }).style('stroke-width', 4).style('stroke', 'none').style('opacity', 0.8).on('mousemove', tooltipHandlers.mousemove).on('mouseleave', tooltipHandlers.mouseleave).on('click', function(d) {\n                var filters = [\n                    {\n                        id: \"\".concat(props.id, \"_x\"),\n                        title: props.title,\n                        field: props.fields.x,\n                        operation: 'in',\n                        values: [\n                            d.g\n                        ]\n                    },\n                    {\n                        id: \"\".concat(props.id, \"_y\"),\n                        title: props.title,\n                        field: props.fields.y,\n                        operation: 'in',\n                        values: [\n                            d.v\n                        ]\n                    }\n                ];\n                props.filterAdded(filters);\n            });\n        }, 100);\n    }, [\n        props.layout,\n        props.filters,\n        props.filterData\n    ]);\n    return /*#__PURE__*/ $b1282ad851fe5139$var$_react[\"default\"].createElement(\"div\", {\n        id: props.id,\n        ref: self,\n        role: \"figure\",\n        style: {\n            width: '100%',\n            height: '100%'\n        }\n    });\n}\nvar $b1282ad851fe5139$var$_default = module.exports[\"default\"] = $b1282ad851fe5139$var$Heatmap;\n$b1282ad851fe5139$var$Heatmap.propTypes = {\n    id: $b1282ad851fe5139$var$_propTypes[\"default\"].string.isRequired,\n    title: $b1282ad851fe5139$var$_propTypes[\"default\"].string.isRequired,\n    data: $b1282ad851fe5139$var$_propTypes[\"default\"].arrayOf($b1282ad851fe5139$var$_propTypes[\"default\"].shape({})).isRequired,\n    fields: $b1282ad851fe5139$var$_propTypes[\"default\"].shape({\n        x: $b1282ad851fe5139$var$_propTypes[\"default\"].string.isRequired,\n        y: $b1282ad851fe5139$var$_propTypes[\"default\"].string.isRequired,\n        z: $b1282ad851fe5139$var$_propTypes[\"default\"].string.isRequired\n    }).isRequired,\n    filterData: $b1282ad851fe5139$var$_propTypes[\"default\"].arrayOf($b1282ad851fe5139$var$_propTypes[\"default\"].shape({})).isRequired,\n    filters: $b1282ad851fe5139$var$_propTypes[\"default\"].arrayOf($b1282ad851fe5139$var$_propTypes[\"default\"].shape({})).isRequired,\n    layout: $b1282ad851fe5139$var$_propTypes[\"default\"].shape({\n        width: $b1282ad851fe5139$var$_propTypes[\"default\"].number.isRequired,\n        currentCols: $b1282ad851fe5139$var$_propTypes[\"default\"].number.isRequired\n    }).isRequired,\n    filterAdded: $b1282ad851fe5139$var$_propTypes[\"default\"].func.isRequired\n};\n\n});\nparcelRegister(\"bN8Lq\", function(module, exports) {\n\"use strict\";\nfunction $895b11a613892f4e$var$_typeof(o) {\n    \"@babel/helpers - typeof\";\n    return $895b11a613892f4e$var$_typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(o) {\n        return typeof o;\n    } : function(o) {\n        return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, $895b11a613892f4e$var$_typeof(o);\n}\nObject.defineProperty(module.exports, \"__esModule\", {\n    value: true\n});\nmodule.exports[\"default\"] = void 0;\n\nvar $895b11a613892f4e$var$d3 = $895b11a613892f4e$var$_interopRequireWildcard((parcelRequire(\"9NlP8\")));\nfunction $895b11a613892f4e$var$_getRequireWildcardCache(e) {\n    if (\"function\" != typeof WeakMap) return null;\n    var r = new WeakMap(), t = new WeakMap();\n    return ($895b11a613892f4e$var$_getRequireWildcardCache = function _getRequireWildcardCache(e) {\n        return e ? t : r;\n    })(e);\n}\nfunction $895b11a613892f4e$var$_interopRequireWildcard(e, r) {\n    if (!r && e && e.__esModule) return e;\n    if (null === e || \"object\" != $895b11a613892f4e$var$_typeof(e) && \"function\" != typeof e) return {\n        \"default\": e\n    };\n    var t = $895b11a613892f4e$var$_getRequireWildcardCache(r);\n    if (t && t.has(e)) return t.get(e);\n    var n = {\n        __proto__: null\n    }, a = Object.defineProperty && Object.getOwnPropertyDescriptor;\n    for(var u in e)if (\"default\" !== u && ({}).hasOwnProperty.call(e, u)) {\n        var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;\n        i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];\n    }\n    return n[\"default\"] = e, t && t.set(e, n), n;\n}\n/**\n * @function createTooltip\n * @description creates a tooltip dev and mount it to\n * the chart\n * @param {*} mount reference to the chart to mount tooltip on\n * @param {Function} addLabel function to generate text inside tooltip\n * @param {Object} offset the x and y offset from mouse position to position tooltip\n * @returns {Object} contains to function mousemove and mouseleave handlers\n */ function $895b11a613892f4e$var$createTooltip(mount, addLabel, offset) {\n    var tooltip = $895b11a613892f4e$var$d3.select(mount).append('div').style('opacity', 1).attr('class', 'tooltip').style('display', 'none').style('background-color', 'white').style('border', 'solid').style('border-width', '2px').style('border-radius', '5px').style('padding', '5px');\n    var mousemove = function move(d) {\n        tooltip.html(addLabel(d)).style('display', '').style('left', \"\".concat(offset.x + $895b11a613892f4e$var$d3.mouse(this)[0], \"px\")).style('top', \"\".concat(offset.y + $895b11a613892f4e$var$d3.mouse(this)[1], \"px\"));\n    };\n    var mouseleave = function leave() {\n        tooltip.style('display', 'none');\n    };\n    return {\n        mousemove: mousemove,\n        mouseleave: mouseleave\n    };\n}\nvar $895b11a613892f4e$var$_default = module.exports[\"default\"] = $895b11a613892f4e$var$createTooltip;\n\n});\n\n\n\n//# sourceMappingURL=Heatmap.e0763320.js.map\n","import React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport PropTypes from 'prop-types';\nimport { numFixed } from '../../../common/utils';\nimport createTooltip from '../../partials/tooltip';\n\nfunction Heatmap(props) {\n  const self = useRef();\n  const scales = {\n    x: d3.scaleBand(),\n    y: d3.scaleBand(),\n    color: d3.scaleSequential(),\n  };\n\n  const margin = {\n    top: 10,\n    right: 10,\n    bottom: 30,\n    left: 60,\n  };\n\n  const myGroups = d3.map(props.data, (d) => d[props.fields.x]).keys();\n  const myVars = d3.map(props.data, (d) => d[props.fields.y]).keys();\n\n  useEffect(() => {\n    setTimeout(() => {\n      // Remove old svg if any\n      d3.select(self.current).select('.tooltip').remove('div');\n      d3.select(self.current).selectAll('svg').remove('svg');\n\n      const rect = self.current.getBoundingClientRect();\n      const innerWidth = rect.width - margin.left - margin.right;\n      const innerHeight = rect.height - margin.top - margin.bottom;\n\n      let { data } = props;\n      if (props.filters.length !== 0) data = props.filterData;\n\n      const svg = d3\n        .select(self.current)\n        .append('svg')\n        .attr('width', rect.width)\n        .attr('height', rect.height)\n        .append('g')\n        .attr('transform', `translate(${margin.left},${margin.top})`);\n\n      // Create and draw x-axis\n      scales.x.range([0, innerWidth]).domain(myGroups).padding(0.05);\n      svg\n        .append('g')\n        .style('font-size', 13)\n        .attr('transform', `translate(0,${innerHeight})`)\n        .call(d3.axisBottom(scales.x).tickSize(0))\n        .select('.domain')\n        .remove();\n\n      // Create and draw y-axis\n      scales.y.range([innerHeight, 0]).domain(myVars).padding(0.05);\n      svg\n        .append('g')\n        .style('font-size', 13)\n        .call(d3.axisLeft(scales.y).tickSize(0))\n        .select('.domain')\n        .remove();\n\n      // Create color scale\n      scales.color\n        .interpolator(d3.interpolateInferno)\n        .domain(d3.extent(props.data, (d) => d[props.fields.z]));\n\n      // create a tooltip\n      const addLabel = (d) => `The ${props.fields.z} of this \n      cell is: ${numFixed(d.z ? d.z : 0)}`;\n      const offset = {\n        x: 80,\n        y: 0,\n      };\n      const tooltipHandlers = createTooltip(self.current, addLabel, offset);\n\n      // Group data by the values of x and y\n      // then aggregate to one value using mean\n      // @TODO add option to choose different function such as: count, max, ..\n      const visData = [];\n      myGroups.forEach((g) => myVars.forEach((v) => {\n        const currentData = data.filter(\n          (d) => d[props.fields.x] === g && d[props.fields.y] === v,\n        );\n        visData.push({\n          g,\n          v,\n          z: d3.mean(currentData, (d) => d[props.fields.z]),\n        });\n      }));\n\n      // Draw each cell\n      svg\n        .selectAll()\n        .data(visData, (d) => `${d.g}:${d.v}`)\n        .enter()\n        .append('rect')\n        .attr('x', (d) => scales.x(d.g))\n        .attr('y', (d) => scales.y(d.v))\n        .attr('rx', 4)\n        .attr('ry', 4)\n        .attr('width', scales.x.bandwidth())\n        .attr('height', scales.y.bandwidth())\n        .style('fill', (d) => scales.color(d.z))\n        .style('stroke-width', 4)\n        .style('stroke', 'none')\n        .style('opacity', 0.8)\n        .on('mousemove', tooltipHandlers.mousemove)\n        .on('mouseleave', tooltipHandlers.mouseleave)\n        .on('click', (d) => {\n          const filters = [\n            {\n              id: `${props.id}_x`,\n              title: props.title,\n              field: props.fields.x,\n              operation: 'in',\n              values: [d.g],\n            },\n            {\n              id: `${props.id}_y`,\n              title: props.title,\n              field: props.fields.y,\n              operation: 'in',\n              values: [d.v],\n            },\n          ];\n          props.filterAdded(filters);\n        });\n    }, 100);\n  }, [props.layout, props.filters, props.filterData]);\n\n  return <div id={props.id} ref={self} role=\"figure\" style={{ width: '100%', height: '100%' }} />;\n}\n\nexport default Heatmap;\n\nHeatmap.propTypes = {\n  id: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  data: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  fields: PropTypes.shape({\n    x: PropTypes.string.isRequired,\n    y: PropTypes.string.isRequired,\n    z: PropTypes.string.isRequired,\n  }).isRequired,\n  filterData: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  filters: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  layout: PropTypes.shape({\n    width: PropTypes.number.isRequired,\n    currentCols: PropTypes.number.isRequired,\n  }).isRequired,\n  filterAdded: PropTypes.func.isRequired,\n};\n","import * as d3 from 'd3';\n\n/**\n * @function createTooltip\n * @description creates a tooltip dev and mount it to\n * the chart\n * @param {*} mount reference to the chart to mount tooltip on\n * @param {Function} addLabel function to generate text inside tooltip\n * @param {Object} offset the x and y offset from mouse position to position tooltip\n * @returns {Object} contains to function mousemove and mouseleave handlers\n */\n\nfunction createTooltip(mount, addLabel, offset) {\n  const tooltip = d3\n    .select(mount)\n    .append('div')\n    .style('opacity', 1)\n    .attr('class', 'tooltip')\n    .style('display', 'none')\n    .style('background-color', 'white')\n    .style('border', 'solid')\n    .style('border-width', '2px')\n    .style('border-radius', '5px')\n    .style('padding', '5px');\n\n  const mousemove = function move(d) {\n    tooltip\n      .html(addLabel(d))\n      .style('display', '')\n      .style('left', `${offset.x + d3.mouse(this)[0]}px`)\n      .style('top', `${offset.y + d3.mouse(this)[1]}px`);\n  };\n\n  const mouseleave = function leave() {\n    tooltip.style('display', 'none');\n  };\n\n  return { mousemove, mouseleave };\n}\n\nexport default createTooltip;\n"],"names":["parcelRequire","$parcel$global","globalThis","parcelRegister","register","module","exports","$b1282ad851fe5139$var$_typeof","o","Symbol","iterator","constructor","prototype","Object","defineProperty","value","$b1282ad851fe5139$var$_react","$b1282ad851fe5139$var$_interopRequireWildcard","$b1282ad851fe5139$var$d3","$b1282ad851fe5139$var$_propTypes","$b1282ad851fe5139$var$_interopRequireDefault","$63tWu","$b1282ad851fe5139$var$_tooltip","e","__esModule","$b1282ad851fe5139$var$_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","$b1282ad851fe5139$var$Heatmap","props","self","useRef","scales","x","scaleBand","y","color","scaleSequential","myGroups","map","data","d","fields","keys","myVars","useEffect","setTimeout","select","current","remove","selectAll","rect","getBoundingClientRect","innerWidth","width","innerHeight","height","filters","length","filterData","svg","append","attr","concat","range","domain","padding","style","axisBottom","tickSize","axisLeft","interpolator","interpolateInferno","extent","z","tooltipHandlers","numFixed","visData","forEach","g","v","currentData","filter","push","mean","enter","bandwidth","on","mousemove","mouseleave","id","title","field","operation","values","filterAdded","layout","createElement","ref","role","propTypes","string","isRequired","arrayOf","shape","number","currentCols","func","$895b11a613892f4e$var$_typeof","$895b11a613892f4e$var$d3","$895b11a613892f4e$var$_interopRequireWildcard","$895b11a613892f4e$var$_getRequireWildcardCache","mount","addLabel","offset","tooltip","html","mouse","_react","_interopRequireWildcard","require","d3","_propTypes","_interopRequireDefault","_utils","_tooltip","_getRequireWildcardCache","_typeof","Heatmap","margin","top","right","bottom","left","createTooltip","_default","PropTypes","move","leave"],"version":3,"file":"Heatmap.e0763320.js.map"}