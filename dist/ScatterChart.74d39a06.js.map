{"version":3,"sources":["components/VisualTools/Chart/ScatterChart.js"],"names":["_react","_interopRequireWildcard","require","d3","_propTypes","_interopRequireDefault","_utils","obj","__esModule","default","_getRequireWildcardCache","e","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","_typeof","o","Symbol","iterator","constructor","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","minLen","_arrayLikeToArray","toString","slice","name","Array","from","test","len","length","arr2","l","f","next","done","push","value","return","isArray","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","_toPropertyKey","key","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","Number","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","bind","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","_getPrototypeOf","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","getPrototypeOf","ScatterChart","exports","_PureComponent","PureComponent","_super","_this","React","createRef","state","margin","top","right","bottom","left","data","filter","d","fields","x","y","z","componentDidUpdate","_this2","setTimeout","select","current","selectAll","remove","rect","getBoundingClientRect","innerWidth","width","innerHeight","height","canvas","append","attr","style","concat","viewer","xScale","createScaleLiner","yScale","radiusScale","axisBottom","tickSize","axisLeft","brush","extent","on","end","draw","point","cx","cy","context","beginPath","arc","Math","PI","closePath","fill","stroke","_this3","node","getContext","clearRect","fillStyle","strokeWidth","strokeStyle","globalAlpha","filters","forEach","drawPoint","filterData","includes","range","scaleLinear","domain","nice","event","selection","_d3$event$selection$","x0","y0","_d3$event$selection$2","x1","y1","id","title","field","operation","values","numFixed","invert","filterAdded","createElement","ref","propTypes","PropTypes","arrayOf","shape","isRequired","string","func"],"mappings":"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","file":"ScatterChart.74d39a06.js","sourceRoot":"../source","sourcesContent":["import React, { PureComponent } from 'react';\nimport * as d3 from 'd3';\nimport PropTypes from 'prop-types';\nimport { numFixed } from '../../../common/utils';\n\nexport default class ScatterChart extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.self = React.createRef();\n    this.state = {\n      margin: {\n        top: 5,\n        right: 10,\n        bottom: 25,\n        left: 25,\n      },\n    };\n    this.state.data = this.props.data.filter(\n      (d) => d[this.props.fields.x] !== 'N/A'\n        && d[this.props.fields.y] !== 'N/A'\n        && d[this.props.fields.z] !== 'N/A',\n    );\n  }\n\n  componentDidMount() {\n    this.componentDidUpdate();\n  }\n\n  componentDidUpdate() {\n    setTimeout(() => {\n      d3.select(this.self.current).selectAll('canvas').remove('canvas');\n      d3.select(this.self.current).selectAll('svg').remove('svg');\n      this.rect = this.self.current.getBoundingClientRect();\n      const innerWidth = this.rect.width - this.state.margin.left - this.state.margin.right;\n      const innerHeight = this.rect.height - this.state.margin.top - this.state.margin.bottom;\n\n      this.canvas = d3\n        .select(this.self.current)\n        .append('canvas')\n        .attr('width', innerWidth)\n        .attr('height', innerHeight + 5)\n        .style('transform', `translate(${this.state.margin.left}px,${this.state.margin.top}px)`);\n\n      // create svg\n      const svg = d3\n        .select(this.self.current)\n        .append('svg')\n        .attr('width', this.rect.width)\n        .attr('height', this.rect.height)\n        .attr('transform', `translate(${0},${-innerHeight})`);\n\n      // create viewer\n      const viewer = svg\n        .append('g')\n        .attr('transform', `translate(${this.state.margin.left},${this.state.margin.top})`);\n      //\n      this.xScale = this.createScaleLiner(this.props.fields.x, [0, innerWidth]);\n      this.yScale = this.createScaleLiner(this.props.fields.y, [innerHeight, 0]);\n      this.radiusScale = this.createScaleLiner(this.props.fields.z, [3, 10]);\n\n      viewer\n        .append('g')\n        .attr('transform', `translate(0,${innerHeight})`)\n        .call(d3.axisBottom(this.xScale).tickSize(-innerHeight));\n\n      // add the y Axis\n      viewer.append('g').call(d3.axisLeft(this.yScale).tickSize(-innerWidth));\n\n      this.brush = d3\n        .brush()\n        .extent([\n          [0, 0],\n          [innerWidth, innerHeight],\n        ])\n        .on('end', this.end.bind(this));\n\n      viewer.append('g').call(this.brush);\n\n      this.draw();\n    }, 100);\n  }\n\n  drawPoint(point) {\n    const cx = this.xScale(point[this.props.fields.x]);\n    const cy = this.yScale(point[this.props.fields.y]);\n    const r = this.props.fields.z ? this.radiusScale(point[this.props.fields.z]) : 3;\n\n    this.context.beginPath();\n    this.context.arc(cx, cy, r, 0, 2 * Math.PI);\n    this.context.closePath();\n    this.context.fill();\n    this.context.stroke();\n  }\n\n  draw() {\n    this.context = this.canvas.node().getContext('2d');\n    this.context.clearRect(0, 0, this.rect.width, this.rect.height);\n    this.context.fillStyle = '#87CEEB';\n    this.context.strokeWidth = 1;\n    this.context.strokeStyle = '#4682B4';\n    this.context.globalAlpha = 1;\n\n    if (this.props.filters.length === 0) {\n      this.state.data.forEach((point) => {\n        this.drawPoint(point);\n      });\n    } else {\n      this.state.data.forEach((point) => {\n        if (this.props.filterData.includes(point)) {\n          this.context.fillStyle = '#87CEEB';\n          this.context.strokeWidth = 1;\n          this.context.strokeStyle = '#4682B4';\n          this.context.globalAlpha = 1;\n        } else {\n          this.context.fillStyle = '#c0c0c0c0';\n          this.context.strokeWidth = 1;\n          this.context.strokeStyle = '#000000';\n          this.context.globalAlpha = 0.2;\n        }\n        this.drawPoint(point);\n      });\n    }\n  }\n\n  createScaleLiner(f, range) {\n    const scaleLiner = d3\n      .scaleLinear()\n      .domain(d3.extent(this.state.data, (d) => d[f]))\n      .range(range)\n      .nice();\n    return scaleLiner;\n  }\n\n  end() {\n    if (!d3.event.selection) return;\n    const [x0, y0] = d3.event.selection[0];\n    const [x1, y1] = d3.event.selection[1];\n    const filters = [\n      {\n        id: `${this.props.id}_x`,\n        title: this.props.title,\n        field: this.props.fields.x,\n        operation: 'range',\n        values: [numFixed(this.xScale.invert(x0)), numFixed(this.xScale.invert(x1))],\n      },\n      {\n        id: `${this.props.id}_y`,\n        title: this.props.title,\n        field: this.props.fields.y,\n        operation: 'range',\n        values: [numFixed(this.yScale.invert(y1)), numFixed(this.yScale.invert(y0))],\n      },\n    ];\n    this.props.filterAdded(filters);\n  }\n\n  render() {\n    return <div id={this.props.id} ref={this.self} style={{ width: '100%', height: '100%' }} />;\n  }\n}\n\nScatterChart.propTypes = {\n  data: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  filterData: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  fields: PropTypes.shape({\n    x: PropTypes.string.isRequired,\n    y: PropTypes.string.isRequired,\n    z: PropTypes.string,\n  }).isRequired,\n  id: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  filters: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  filterAdded: PropTypes.func.isRequired,\n};\n"]}