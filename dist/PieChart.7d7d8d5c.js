function e(e){return e&&e.__esModule?e.default:e}function t(e,t,a,l){Object.defineProperty(e,t,{get:a,set:l,enumerable:!0,configurable:!0})}var a=globalThis.parcelRequire94c2,l=a.register;l("528GW",function(l,r){Object.defineProperty(l.exports,"__esModule",{value:!0,configurable:!0}),t(l.exports,"default",()=>u);var i=a("acw62"),s=a("9NlP8"),d=a("c9Z8w"),n=a("bN8Lq");function o(t){let a=(0,i.useRef)(),l=s.nest().key(e=>e[t.fields.x]).rollup(e=>e.length).entries(t.data),r=s.sum(l,e=>e.value),d=s.pie().sortValues((e,t)=>t-e).value(e=>e.value)(l);return(0,i.useEffect)(()=>{setTimeout(()=>{s.select(a.current).select(".tooltip").remove(".tooltip"),s.select(a.current).selectAll("svg").remove("svg");let e=a.current.getBoundingClientRect(),i=e.width-5-5,o=e.height-5-5,u=Math.min(i,o)/2,c=s.arc().innerRadius(0).outerRadius(u),f=s.scaleOrdinal().domain(l.map(e=>e.key)).range(s.quantize(e=>s.interpolateSpectral(e),l.length)),p=s.select(a.current).append("svg").attr("width",e.width).attr("height",e.height),h=p.append("g").attr("transform",`translate(${i/2+5},${o/2+5})`);if(i>500){let e=p.selectAll(".legend").data(d).enter().append("g").attr("transform",(e,t)=>`translate(${i-110},${15*t+20})`).attr("class","legend");e.append("rect").attr("width",13).attr("height",13).attr("fill",(e,t)=>f(t)).attr("stroke","grey").style("stroke-width","1px"),e.append("text").text(e=>`${e.value}  ${e.data.key}`).style("font-size",15).attr("y",13).attr("x",15)}let y={x:e.width/2+20,y:e.height/2},g=(0,n.default)(a.current,e=>`Class: ${e.data.key} Count: ${e.data.value} 
      Percentage: ${s.format(".0%")(e.data.value/r)}`,y),m=h.selectAll("path").data(d).join("path").attr("class","slide").attr("fill",e=>f(e.data.key)).attr("d",c).on("mousemove",g.mousemove).on("mouseleave",g.mouseleave).on("click",e=>{e.data.selected=!e.data.selected;let a=l.reduce((e,t)=>(t.selected&&e.push(t.key),e),[]);if(a.length>0){let e={id:t.id,title:t.title,field:t.fields.x,operation:"in",values:a};t.filterAdded([e])}else t.filterRemove(t.id)}),v=t.filters.filter(e=>e.id===t.id);v.length>0&&v[0].values.forEach(e=>{l.forEach(t=>{t.key===e&&(t.selected=!0)})}),v.length>0?m.attr("fill",e=>e.data.selected?f(e.data.key):"#C0C0C0").attr("fill-opacity",e=>e.data.selected?1:.5).attr("stroke","#CCCCCC").attr("stroke-width",e=>e.data.selected?3:0):(l.forEach(e=>{e.selected=!1}),m.attr("fill",e=>f(e.data.key)).attr("fill-opacity",1).attr("stroke","none"))},100)},[t.layout,t.filters]),e(i).createElement("div",{style:{width:"100%",height:"100%"}},e(i).createElement("div",{role:"figure",id:t.id,ref:a,style:{width:"100%",height:"100%"}}))}var u=o;o.propTypes={data:e(d).arrayOf(e(d).shape({})).isRequired,fields:e(d).shape({x:e(d).string.isRequired}).isRequired,id:e(d).string.isRequired,title:e(d).string.isRequired,filters:e(d).arrayOf(e(d).shape({})).isRequired,filterAdded:e(d).func.isRequired,filterRemove:e(d).func.isRequired,layout:e(d).shape({width:e(d).number.isRequired,currentCols:e(d).number.isRequired}).isRequired}}),l("bN8Lq",function(e,l){t(e.exports,"default",()=>i);var r=a("9NlP8"),i=function(e,t,a){let l=r.select(e).append("div").style("opacity",1).attr("class","tooltip").style("display","none").style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");return{mousemove:function(e){l.html(t(e)).style("display","").style("left",`${a.x+r.mouse(this)[0]}px`).style("top",`${a.y+r.mouse(this)[1]}px`)},mouseleave:function(){l.style("display","none")}}}});
//# sourceMappingURL=PieChart.7d7d8d5c.js.map
