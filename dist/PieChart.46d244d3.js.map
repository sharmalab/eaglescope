{"mappings":"A,I,E,A,W,iB,C,E,E,Q,C,E,Q,S,C,C,C,E,S,E,C,E,M,C,E,Y,O,Q,U,O,O,Q,C,S,C,E,O,O,C,E,S,C,E,O,G,Y,O,Q,E,W,G,Q,I,O,S,C,S,O,C,C,E,E,C,O,c,C,E,O,C,a,C,M,C,C,G,E,O,C,O,C,K,ECAA,IAAAyI,EAAAC,EAAA,EAAA,UACAE,EAAAF,EAAA,EAAA,UACAG,EAAAC,EAAA,EAAA,UACAC,EAAAD,EAAA,EAAA,UAAmD,SAAAA,EAAAxH,CAAA,EAAA,OAAAA,GAAAA,EAAAC,UAAA,CAAAD,EAAA,CAAA,QAAAA,CAAA,CAAA,CAAA,SAAA0H,EAAA1H,CAAA,EAAA,GAAA,YAAA,OAAAG,QAAA,OAAA,KAAA,IAAAC,EAAA,IAAAD,QAAAE,EAAA,IAAAF,QAAA,MAAAuH,AAAAA,CAAAA,EAAA,SAAA1H,CAAA,EAAA,OAAAA,EAAAK,EAAAD,CAAA,CAAA,EAAAJ,EAAA,CAAA,SAAAoH,EAAApH,CAAA,CAAAI,CAAA,EAAA,GAAA,CAAAA,GAAAJ,GAAAA,EAAAC,UAAA,CAAA,OAAAD,EAAA,GAAA,OAAAA,GAAA,UAAA2H,EAAA3H,IAAA,YAAA,OAAAA,EAAA,MAAA,CAAA,QAAAA,CAAA,EAAA,IAAAK,EAAAqH,EAAAtH,GAAA,GAAAC,GAAAA,EAAAC,GAAA,CAAAN,GAAA,OAAAK,EAAAE,GAAA,CAAAP,GAAA,IAAAQ,EAAA,CAAAC,UAAA,IAAA,EAAAC,EAAAnB,OAAAC,cAAA,EAAAD,OAAAoB,wBAAA,CAAA,IAAA,IAAAC,KAAAZ,EAAA,GAAA,YAAAY,GAAA,AAAA,CAAA,CAAA,CAAA,EAAAC,cAAA,CAAAC,IAAA,CAAAd,EAAAY,GAAA,CAAA,IAAAG,EAAAL,EAAAnB,OAAAoB,wBAAA,CAAAX,EAAAY,GAAA,IAAAG,CAAAA,GAAAA,CAAAA,EAAAR,GAAA,EAAAQ,EAAAC,GAAAA,AAAAA,EAAAzB,OAAAC,cAAA,CAAAgB,EAAAI,EAAAG,GAAAP,CAAA,CAAAI,EAAA,CAAAZ,CAAA,CAAAY,EAAA,AAAA,CAAA,OAAAJ,EAAA,OAAA,CAAAR,EAAAK,GAAAA,EAAAW,GAAA,CAAAhB,EAAAQ,GAAAA,CAAA,CAEnD,SAASoH,EAAS1G,CAAK,EACrB,IAAMC,EAAO,AAAA,CAAA,EAAAC,EAAAA,MAAM,AAANA,IAOPC,EAAOiG,EACVhG,IAAI,GACJC,GAAG,CAAC,SAACC,CAAC,EAAA,OAAKA,CAAC,CAACN,EAAMO,MAAM,CAACC,CAAC,CAAC,AAAA,GAE5BC,MAAM,CAAC,SAACC,CAAC,EAAA,OAAKA,EAAEC,MAAM,AAAA,GACtBC,OAAO,CAACZ,EAAMG,IAAI,EAEfU,EAAMuF,EAAGvF,GAAG,CAACV,EAAM,SAACG,CAAC,EAAA,OAAKA,EAAE/B,KAAK,AAAA,GAMjCuC,EAAOC,AALDqF,EACTrF,GAAG,GACHC,UAAU,CAAC,SAACxB,CAAC,CAAEyB,CAAC,EAAA,OAAKA,EAAIzB,CAAC,GAC1BjB,KAAK,CAAC,SAAC+B,CAAC,EAAA,OAAKA,EAAE/B,KAAK,AAAA,GAEN4B,GA6HjB,MA3HA,AAAA,CAAA,EAAAe,EAAAA,SAAAA,AAAAA,EAAU,WACRC,WAAW,WAETiF,EAAGhF,MAAM,CAACnB,EAAKoB,OAAO,EAAED,MAAM,CAAC,YAAYE,MAAM,CAAC,YAClD8E,EAAGhF,MAAM,CAACnB,EAAKoB,OAAO,EAAEE,SAAS,CAAC,OAAOD,MAAM,CAAC,OAGhD,IAAME,EAAOvB,EAAKoB,OAAO,CAACI,qBAAqB,GACzCC,EAAaF,EAAKG,KAAK,CAzBzB,EAFC,EA4BCC,EAAcJ,EAAKK,MAAM,CA7B5B,EAEG,EA4BAC,EAASC,KAAKC,GAAG,CAACN,EAAYE,GAAe,EAE7CK,EAAMmE,EAAGnE,GAAG,GAAGC,WAAW,CAAC,GAAGC,WAAW,CAACL,GAE1CM,EAAQgE,EACX/D,YAAY,GACZC,MAAM,CAACnC,EAAKoC,GAAG,CAAC,SAACjC,CAAC,EAAA,OAAKA,EAAED,GAAG,AAAA,IAC5BmC,KAAK,CAAC4D,EAAG3D,QAAQ,CAAC,SAACtD,CAAC,EAAA,OAAKiH,EAAG1D,mBAAmB,CAACvD,EAAE,EAAEgB,EAAKQ,MAAM,GAE5DgC,EAAMyD,EACThF,MAAM,CAACnB,EAAKoB,OAAO,EACnBuB,MAAM,CAAC,OACPC,IAAI,CAAC,QAASrB,EAAKG,KAAK,EACxBkB,IAAI,CAAC,SAAUrB,EAAKK,MAAM,EAEvBiB,EAASH,EACZC,MAAM,CAAC,KACPC,IAAI,CACH,YAAW,aAAAE,MAAA,CACErB,EAAa,EA9C1B,EA8CyC,KAAAqB,MAAA,CAAInB,EAAc,EAjD5D,EAiD0E,MAG7E,GAAIF,EAAa,IAAK,CACpB,IAAMsB,EAAUL,EACbpB,SAAS,CAAC,WACVpB,IAAI,CAACW,GACLmC,KAAK,GACLL,MAAM,CAAC,KACPC,IAAI,CAAC,YAAa,SAACvC,CAAC,CAAET,CAAC,EAAA,MAAA,aAAAkD,MAAA,CAAkBrB,EAAa,IAAG,KAAAqB,MAAA,CAAIlD,AAAI,GAAJA,EAAS,GAA/C,IAAiD,GACxEgD,IAAI,CAAC,QAAS,UAEjBG,EACGJ,MAAM,CAAC,QACPC,IAAI,CAAC,QAAS,IACdA,IAAI,CAAC,SAAU,IACfA,IAAI,CAAC,OAAQ,SAACvC,CAAC,CAAET,CAAC,EAAA,OAAKuC,EAAMvC,EAAE,GAC/BgD,IAAI,CAAC,SAAU,QACfK,KAAK,CAAC,eAAgB,OAEzBF,EACGJ,MAAM,CAAC,QACPO,IAAI,CAAC,SAAC7C,CAAC,EAAA,MAAA,GAAAyC,MAAA,CAAQzC,EAAE/B,KAAK,CAAA,MAAAwE,MAAA,CAAKzC,EAAEH,IAAI,CAACE,GAAG,CAAA,GACrC6C,KAAK,CAAC,YAAa,IACnBL,IAAI,CAAC,IAAK,IACVA,IAAI,CAAC,IAAK,GACf,CAKA,IAAMO,EAAS,CACb5C,EAAGgB,EAAKG,KAAK,CAAG,EAAI,GACpB0B,EAAG7B,EAAKK,MAAM,CAAG,CACnB,EACMyB,EAAkB,AAAA,CAAA,EAAA0D,EAAAA,OAAAA,AAAAA,EAAc/G,EAAKoB,OAAO,CANjC,SAACf,CAAC,EAAA,MAAA,UAAAyC,MAAA,CAAezC,EAAEH,IAAI,CAACE,GAAG,CAAA,YAAA0C,MAAA,CAAWzC,EAAEH,IAAI,CAAC5B,KAAK,CAAA,yBAAAwE,MAAA,CACrDqD,EAAG7C,MAAM,CAAC,OAAOjD,EAAEH,IAAI,CAAC5B,KAAK,CAAGsC,GAAI,EAKYuC,GAsBxDI,EAAOV,EACVvB,SAAS,CAAC,QACVpB,IAAI,CAACW,GACL2C,IAAI,CAAC,QACLZ,IAAI,CAAC,QAAS,SACdA,IAAI,CAAC,OAAQ,SAACvC,CAAC,EAAA,OAAK8B,EAAM9B,EAAEH,IAAI,CAACE,GAAG,CAAC,GACrCwC,IAAI,CAAC,IAAKZ,GACVyB,EAAE,CAAC,YAAaJ,EAAgBK,SAAS,EACzCD,EAAE,CAAC,aAAcJ,EAAgBM,UAAU,EAC3CF,EAAE,CAAC,QA7BU,SAACpD,CAAC,EAChBA,EAAEH,IAAI,CAAC0D,QAAQ,CAAG,CAACvD,EAAEH,IAAI,CAAC0D,QAAQ,CAClC,IAAMC,EAAS3D,EAAK4D,MAAM,CAAC,SAACxF,CAAK,CAAEyF,CAAK,EAEtC,OADIA,EAAMH,QAAQ,EAAEtF,EAAM0F,IAAI,CAACD,EAAM3D,GAAG,EACjC9B,CACT,EAAG,EAAE,EACL,GAAIuF,EAAOnD,MAAM,CAAG,EAAG,CACrB,IAAMuD,EAAS,CACbC,GAAInE,EAAMmE,EAAE,CACZC,MAAOpE,EAAMoE,KAAK,CAClBC,MAAOrE,EAAMO,MAAM,CAACC,CAAC,CACrB8D,UAAW,KACXR,OAAAA,CACF,EACA9D,EAAMuE,WAAW,CAAC,CAACL,EAAO,CAC5B,MACElE,EAAMwE,YAAY,CAACxE,EAAMmE,EAAE,CAE/B,GAaMM,EAAUzE,EAAMyE,OAAO,CAACP,MAAM,CAAC,SAACQ,CAAC,EAAA,OAAKA,EAAEP,EAAE,GAAKnE,EAAMmE,EAAE,AAAA,EACzDM,CAAAA,EAAQ9D,MAAM,CAAG,GACnB8D,CAAO,CAAC,EAAE,CAACX,MAAM,CAACa,OAAO,CAAC,SAACpG,CAAK,EAC9B4B,EAAKwE,OAAO,CAAC,SAACrE,CAAC,EACTA,EAAED,GAAG,GAAK9B,GAAO+B,CAAAA,EAAEuD,QAAQ,CAAG,CAAA,CAAlC,CACF,EACF,GAEEY,EAAQ9D,MAAM,CAAG,EACnB6C,EACGX,IAAI,CAAC,OAAQ,SAACvC,CAAC,EAAA,OAAMA,EAAEH,IAAI,CAAC0D,QAAQ,CAAGzB,EAAM9B,EAAEH,IAAI,CAACE,GAAG,EAAI,SAAS,GACpEwC,IAAI,CAAC,eAAgB,SAACvC,CAAC,EAAA,OAAMA,EAAEH,IAAI,CAAC0D,QAAQ,CAAG,EAAI,EAAG,GACtDhB,IAAI,CAAC,SAAU,WACfA,IAAI,CAAC,eAAgB,SAACvC,CAAC,EAAA,OAAMA,EAAEH,IAAI,CAAC0D,QAAQ,CAAG,EAAI,CAAC,IAEvD1D,EAAKwE,OAAO,CAAC,SAACrE,CAAC,EACbA,EAAEuD,QAAQ,CAAG,CAAA,CACf,GACAL,EACGX,IAAI,CAAC,OAAQ,SAACvC,CAAC,EAAA,OAAK8B,EAAM9B,EAAEH,IAAI,CAACE,GAAG,CAAC,GACrCwC,IAAI,CAAC,eAAgB,GACrBA,IAAI,CAAC,SAAU,QAEtB,EAAG,IACL,EAAG,CAAC7C,EAAM4E,MAAM,CAAE5E,EAAMyE,OAAO,CAAC,EAG9BwB,EAAA,OAAA,CAAApB,aAAA,CADF,MAAA,CACO3B,MAAO,CAAEvB,MAAO,OAAQE,OAAQ,MAAO,CAAE,EAC5CoE,EAAA,OAAA,CAAApB,aAAA,CAD4C,MAAA,CACvCC,KAAK,SAASX,GAAInE,EAAMmE,EAAG,CAACY,IAAK9E,EAAMiD,MAAO,CAAEvB,MAAO,OAAQE,OAAQ,MAAO,CAAE,GAG3F,CAAC/D,EAAAA,OAAA,CAAA,OAAA,CAEc4I,EAEfA,EAAS1B,SAAS,CAAG,CACnB7E,KAAMgH,EAAAA,OAAS,CAAClC,OAAO,CAACkC,EAAAA,OAAS,CAACjC,KAAK,CAAC,CAAC,IAAIC,UAAU,CACvD5E,OAAQ4G,EAAAA,OAAS,CAACjC,KAAK,CAAC,CAAE1E,EAAG2G,EAAAA,OAAS,CAAC/B,MAAM,CAACD,UAApB3E,AAA+B,GAAG2E,UAAU,CACtEhB,GAAIgD,EAAAA,OAAS,CAAC/B,MAAM,CAACD,UAAU,CAC/Bf,MAAO+C,EAAAA,OAAS,CAAC/B,MAAM,CAACD,UAAU,CAClCV,QAAS0C,EAAAA,OAAS,CAAClC,OAAO,CAACkC,EAAAA,OAAS,CAACjC,KAAK,CAAC,CAAC,IAAIC,UAAU,CAC1DZ,YAAa4C,EAAAA,OAAS,CAAC9B,IAAI,CAACF,UAAU,CACtCX,aAAc2C,EAAAA,OAAS,CAAC9B,IAAI,CAACF,UAAU,CACvCP,OAAQuC,EAAAA,OAAS,CAACjC,KAAK,CAAC,CACtBvD,MAAOwF,EAAAA,OAAS,CAAC7B,MAAM,CAACH,UAAU,CAClCI,YAAa4B,EAAAA,OAAS,CAAC7B,MAAM,CAACH,UAA9BI,AACF,GAAGJ,UAAH,AACF,C,G,E,Q,S,C,C,C,E,S,E,C,E,M,C,E,Y,O,Q,U,O,O,Q,C,S,C,E,O,O,C,E,S,C,E,O,G,Y,O,Q,E,W,G,Q,I,O,S,C,S,O,C,C,E,E,C,O,c,C,E,O,C,a,C,M,C,C,G,E,O,C,O,C,K,EC5KA,IAAAiB,EAAAF,AAAyB,SAAApH,CAAA,CAAAI,CAAA,EAAA,GAAA,AAAAJ,GAAAA,EAAAC,UAAA,CAAA,OAAAD,EAAA,GAAA,OAAAA,GAAA,UAAA2H,EAAA3H,IAAA,YAAA,OAAAA,EAAA,MAAA,CAAA,QAAAA,CAAA,EAAA,IAAAK,EAAAqH,EAAAtH,KAAAA,GAAA,GAAAC,GAAAA,EAAAC,GAAA,CAAAN,GAAA,OAAAK,EAAAE,GAAA,CAAAP,GAAA,IAAAQ,EAAA,CAAAC,UAAA,IAAA,EAAAC,EAAAnB,OAAAC,cAAA,EAAAD,OAAAoB,wBAAA,CAAA,IAAA,IAAAC,KAAAZ,EAAA,GAAA,YAAAY,GAAA,AAAA,CAAA,CAAA,CAAA,EAAAC,cAAA,CAAAC,IAAA,CAAAd,EAAAY,GAAA,CAAA,IAAAG,EAAAL,EAAAnB,OAAAoB,wBAAA,CAAAX,EAAAY,GAAA,IAAAG,CAAAA,GAAAA,CAAAA,EAAAR,GAAA,EAAAQ,EAAAC,GAAAA,AAAAA,EAAAzB,OAAAC,cAAA,CAAAgB,EAAAI,EAAAG,GAAAP,CAAA,CAAAI,EAAA,CAAAZ,CAAA,CAAAY,EAAA,AAAA,CAAA,OAAAJ,EAAA,OAAA,CAAAR,EAAAK,GAAAA,EAAAW,GAAA,CAAAhB,EAAAQ,GAAAA,CAAA,EAAzB,EAAA,UAAyB,SAAAkH,EAAA1H,CAAA,EAAA,GAAA,YAAA,OAAAG,QAAA,OAAA,KAAA,IAAAC,EAAA,IAAAD,QAAAE,EAAA,IAAAF,QAAA,MAAAuH,AAAAA,CAAAA,EAAA,SAAA1H,CAAA,EAAA,OAAAA,EAAAK,EAAAD,CAAA,CAAA,EAAAJ,EAAA,CAsCxBhB,EAAAA,OAAA,CAAA,OAAA,CA1BD,SAAuB8H,CAAK,CAAEC,CAAQ,CAAEzC,CAAM,EAC5C,IAAM0C,EAAUM,EACbhF,MAAM,CAACwE,GACPhD,MAAM,CAAC,OACPM,KAAK,CAAC,UAAW,GACjBL,IAAI,CAAC,QAAS,WACdK,KAAK,CAAC,UAAW,QACjBA,KAAK,CAAC,mBAAoB,SAC1BA,KAAK,CAAC,SAAU,SAChBA,KAAK,CAAC,eAAgB,OACtBA,KAAK,CAAC,gBAAiB,OACvBA,KAAK,CAAC,UAAW,OAcpB,MAAO,CAAES,UAZS,SAAcrD,CAAC,EAC/BwF,EACGC,IAAI,CAACF,EAASvF,IACd4C,KAAK,CAAC,UAAW,IACjBA,KAAK,CAAC,OAAM,GAAAH,MAAA,CAAKK,EAAO5C,CAAC,CAAG4F,EAAGJ,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,CAAA,OAC7C9C,KAAK,CAAC,MAAK,GAAAH,MAAA,CAAKK,EAAOC,CAAC,CAAG+C,EAAGJ,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,CAAA,MACjD,EAMoBpC,WAJD,WACjBkC,EAAQ5C,KAAK,CAAC,UAAW,OAC3B,CAE+B,CACjC,C","sources":["<anon>","source/components/VisualTools/Chart/PieChart.js","source/components/partials/tooltip.js"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequire94c2\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"528GW\", function(module, exports) {\n\"use strict\";\nfunction $3aa3e19e5db4a062$var$_typeof(o) {\n    \"@babel/helpers - typeof\";\n    return $3aa3e19e5db4a062$var$_typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(o) {\n        return typeof o;\n    } : function(o) {\n        return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, $3aa3e19e5db4a062$var$_typeof(o);\n}\nObject.defineProperty(module.exports, \"__esModule\", {\n    value: true\n});\nmodule.exports[\"default\"] = void 0;\n\nvar $3aa3e19e5db4a062$var$_react = $3aa3e19e5db4a062$var$_interopRequireWildcard((parcelRequire(\"acw62\")));\n\nvar $3aa3e19e5db4a062$var$d3 = $3aa3e19e5db4a062$var$_interopRequireWildcard((parcelRequire(\"9NlP8\")));\n\nvar $3aa3e19e5db4a062$var$_propTypes = $3aa3e19e5db4a062$var$_interopRequireDefault((parcelRequire(\"c9Z8w\")));\n\nvar $3aa3e19e5db4a062$var$_tooltip = $3aa3e19e5db4a062$var$_interopRequireDefault((parcelRequire(\"bN8Lq\")));\nfunction $3aa3e19e5db4a062$var$_interopRequireDefault(e) {\n    return e && e.__esModule ? e : {\n        \"default\": e\n    };\n}\nfunction $3aa3e19e5db4a062$var$_getRequireWildcardCache(e) {\n    if (\"function\" != typeof WeakMap) return null;\n    var r = new WeakMap(), t = new WeakMap();\n    return ($3aa3e19e5db4a062$var$_getRequireWildcardCache = function _getRequireWildcardCache(e) {\n        return e ? t : r;\n    })(e);\n}\nfunction $3aa3e19e5db4a062$var$_interopRequireWildcard(e, r) {\n    if (!r && e && e.__esModule) return e;\n    if (null === e || \"object\" != $3aa3e19e5db4a062$var$_typeof(e) && \"function\" != typeof e) return {\n        \"default\": e\n    };\n    var t = $3aa3e19e5db4a062$var$_getRequireWildcardCache(r);\n    if (t && t.has(e)) return t.get(e);\n    var n = {\n        __proto__: null\n    }, a = Object.defineProperty && Object.getOwnPropertyDescriptor;\n    for(var u in e)if (\"default\" !== u && ({}).hasOwnProperty.call(e, u)) {\n        var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;\n        i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];\n    }\n    return n[\"default\"] = e, t && t.set(e, n), n;\n}\nfunction $3aa3e19e5db4a062$var$PieChart(props) {\n    var self = (0, $3aa3e19e5db4a062$var$_react.useRef)();\n    var margin = {\n        top: 5,\n        right: 5,\n        bottom: 5,\n        left: 5\n    };\n    var data = $3aa3e19e5db4a062$var$d3.nest().key(function(d) {\n        return d[props.fields.x];\n    }).rollup(function(v) {\n        return v.length;\n    }).entries(props.data);\n    var sum = $3aa3e19e5db4a062$var$d3.sum(data, function(d) {\n        return d.value;\n    });\n    var pie = $3aa3e19e5db4a062$var$d3.pie().sortValues(function(a, b) {\n        return b - a;\n    }).value(function(d) {\n        return d.value;\n    });\n    var arcs = pie(data);\n    (0, $3aa3e19e5db4a062$var$_react.useEffect)(function() {\n        setTimeout(function() {\n            // Remove old svg if any\n            $3aa3e19e5db4a062$var$d3.select(self.current).select('.tooltip').remove('.tooltip');\n            $3aa3e19e5db4a062$var$d3.select(self.current).selectAll('svg').remove('svg');\n            // calculate chart dimensions\n            var rect = self.current.getBoundingClientRect();\n            var innerWidth = rect.width - margin.left - margin.right;\n            var innerHeight = rect.height - margin.top - margin.bottom;\n            var radius = Math.min(innerWidth, innerHeight) / 2;\n            var arc = $3aa3e19e5db4a062$var$d3.arc().innerRadius(0).outerRadius(radius);\n            var color = $3aa3e19e5db4a062$var$d3.scaleOrdinal().domain(data.map(function(d) {\n                return d.key;\n            })).range($3aa3e19e5db4a062$var$d3.quantize(function(t) {\n                return $3aa3e19e5db4a062$var$d3.interpolateSpectral(t);\n            }, data.length));\n            var svg = $3aa3e19e5db4a062$var$d3.select(self.current).append('svg').attr('width', rect.width).attr('height', rect.height);\n            var viewer = svg.append('g').attr('transform', \"translate(\".concat(innerWidth / 2 + margin.left, \",\").concat(innerHeight / 2 + margin.top, \")\"));\n            if (innerWidth > 500) {\n                var legendG = svg.selectAll('.legend').data(arcs).enter().append('g').attr('transform', function(d, i) {\n                    return \"translate(\".concat(innerWidth - 110, \",\").concat(i * 15 + 20, \")\");\n                }).attr('class', 'legend');\n                legendG.append('rect') // make a matching color rect\n                .attr('width', 13).attr('height', 13).attr('fill', function(d, i) {\n                    return color(i);\n                }).attr('stroke', 'grey').style('stroke-width', '1px');\n                legendG.append('text') // add the text\n                .text(function(d) {\n                    return \"\".concat(d.value, \"  \").concat(d.data.key);\n                }).style('font-size', 15).attr('y', 13).attr('x', 15);\n            }\n            // create a tooltip\n            var addLabel = function addLabel(d) {\n                return \"Class: \".concat(d.data.key, \" Count: \").concat(d.data.value, \" \\n      Percentage: \").concat($3aa3e19e5db4a062$var$d3.format('.0%')(d.data.value / sum));\n            };\n            var offset = {\n                x: rect.width / 2 + 20,\n                y: rect.height / 2\n            };\n            var tooltipHandlers = (0, $3aa3e19e5db4a062$var$_tooltip[\"default\"])(self.current, addLabel, offset);\n            var onClick = function onClick(d) {\n                d.data.selected = !d.data.selected;\n                var values = data.reduce(function(value, point) {\n                    if (point.selected) value.push(point.key);\n                    return value;\n                }, []);\n                if (values.length > 0) {\n                    var filter = {\n                        id: props.id,\n                        title: props.title,\n                        field: props.fields.x,\n                        operation: 'in',\n                        values: values\n                    };\n                    props.filterAdded([\n                        filter\n                    ]);\n                } else props.filterRemove(props.id);\n            };\n            var pies = viewer.selectAll('path').data(arcs).join('path').attr('class', 'slide').attr('fill', function(d) {\n                return color(d.data.key);\n            }).attr('d', arc).on('mousemove', tooltipHandlers.mousemove).on('mouseleave', tooltipHandlers.mouseleave).on('click', onClick);\n            var filters = props.filters.filter(function(f) {\n                return f.id === props.id;\n            });\n            if (filters.length > 0) filters[0].values.forEach(function(value) {\n                data.forEach(function(d) {\n                    if (d.key === value) d.selected = true;\n                });\n            });\n            if (filters.length > 0) pies.attr('fill', function(d) {\n                return d.data.selected ? color(d.data.key) : '#C0C0C0';\n            }).attr('fill-opacity', function(d) {\n                return d.data.selected ? 1 : 0.5;\n            }).attr('stroke', '#CCCCCC').attr('stroke-width', function(d) {\n                return d.data.selected ? 3 : 0;\n            });\n            else {\n                data.forEach(function(d) {\n                    d.selected = false;\n                });\n                pies.attr('fill', function(d) {\n                    return color(d.data.key);\n                }).attr('fill-opacity', 1).attr('stroke', 'none');\n            }\n        }, 100);\n    }, [\n        props.layout,\n        props.filters\n    ]);\n    return /*#__PURE__*/ $3aa3e19e5db4a062$var$_react[\"default\"].createElement(\"div\", {\n        style: {\n            width: '100%',\n            height: '100%'\n        }\n    }, /*#__PURE__*/ $3aa3e19e5db4a062$var$_react[\"default\"].createElement(\"div\", {\n        role: \"figure\",\n        id: props.id,\n        ref: self,\n        style: {\n            width: '100%',\n            height: '100%'\n        }\n    }));\n}\nvar $3aa3e19e5db4a062$var$_default = module.exports[\"default\"] = $3aa3e19e5db4a062$var$PieChart;\n$3aa3e19e5db4a062$var$PieChart.propTypes = {\n    data: $3aa3e19e5db4a062$var$_propTypes[\"default\"].arrayOf($3aa3e19e5db4a062$var$_propTypes[\"default\"].shape({})).isRequired,\n    fields: $3aa3e19e5db4a062$var$_propTypes[\"default\"].shape({\n        x: $3aa3e19e5db4a062$var$_propTypes[\"default\"].string.isRequired\n    }).isRequired,\n    id: $3aa3e19e5db4a062$var$_propTypes[\"default\"].string.isRequired,\n    title: $3aa3e19e5db4a062$var$_propTypes[\"default\"].string.isRequired,\n    filters: $3aa3e19e5db4a062$var$_propTypes[\"default\"].arrayOf($3aa3e19e5db4a062$var$_propTypes[\"default\"].shape({})).isRequired,\n    filterAdded: $3aa3e19e5db4a062$var$_propTypes[\"default\"].func.isRequired,\n    filterRemove: $3aa3e19e5db4a062$var$_propTypes[\"default\"].func.isRequired,\n    layout: $3aa3e19e5db4a062$var$_propTypes[\"default\"].shape({\n        width: $3aa3e19e5db4a062$var$_propTypes[\"default\"].number.isRequired,\n        currentCols: $3aa3e19e5db4a062$var$_propTypes[\"default\"].number.isRequired\n    }).isRequired\n};\n\n});\nparcelRegister(\"bN8Lq\", function(module, exports) {\n\"use strict\";\nfunction $895b11a613892f4e$var$_typeof(o) {\n    \"@babel/helpers - typeof\";\n    return $895b11a613892f4e$var$_typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(o) {\n        return typeof o;\n    } : function(o) {\n        return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, $895b11a613892f4e$var$_typeof(o);\n}\nObject.defineProperty(module.exports, \"__esModule\", {\n    value: true\n});\nmodule.exports[\"default\"] = void 0;\n\nvar $895b11a613892f4e$var$d3 = $895b11a613892f4e$var$_interopRequireWildcard((parcelRequire(\"9NlP8\")));\nfunction $895b11a613892f4e$var$_getRequireWildcardCache(e) {\n    if (\"function\" != typeof WeakMap) return null;\n    var r = new WeakMap(), t = new WeakMap();\n    return ($895b11a613892f4e$var$_getRequireWildcardCache = function _getRequireWildcardCache(e) {\n        return e ? t : r;\n    })(e);\n}\nfunction $895b11a613892f4e$var$_interopRequireWildcard(e, r) {\n    if (!r && e && e.__esModule) return e;\n    if (null === e || \"object\" != $895b11a613892f4e$var$_typeof(e) && \"function\" != typeof e) return {\n        \"default\": e\n    };\n    var t = $895b11a613892f4e$var$_getRequireWildcardCache(r);\n    if (t && t.has(e)) return t.get(e);\n    var n = {\n        __proto__: null\n    }, a = Object.defineProperty && Object.getOwnPropertyDescriptor;\n    for(var u in e)if (\"default\" !== u && ({}).hasOwnProperty.call(e, u)) {\n        var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;\n        i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];\n    }\n    return n[\"default\"] = e, t && t.set(e, n), n;\n}\n/**\n * @function createTooltip\n * @description creates a tooltip dev and mount it to\n * the chart\n * @param {*} mount reference to the chart to mount tooltip on\n * @param {Function} addLabel function to generate text inside tooltip\n * @param {Object} offset the x and y offset from mouse position to position tooltip\n * @returns {Object} contains to function mousemove and mouseleave handlers\n */ function $895b11a613892f4e$var$createTooltip(mount, addLabel, offset) {\n    var tooltip = $895b11a613892f4e$var$d3.select(mount).append('div').style('opacity', 1).attr('class', 'tooltip').style('display', 'none').style('background-color', 'white').style('border', 'solid').style('border-width', '2px').style('border-radius', '5px').style('padding', '5px');\n    var mousemove = function move(d) {\n        tooltip.html(addLabel(d)).style('display', '').style('left', \"\".concat(offset.x + $895b11a613892f4e$var$d3.mouse(this)[0], \"px\")).style('top', \"\".concat(offset.y + $895b11a613892f4e$var$d3.mouse(this)[1], \"px\"));\n    };\n    var mouseleave = function leave() {\n        tooltip.style('display', 'none');\n    };\n    return {\n        mousemove: mousemove,\n        mouseleave: mouseleave\n    };\n}\nvar $895b11a613892f4e$var$_default = module.exports[\"default\"] = $895b11a613892f4e$var$createTooltip;\n\n});\n\n\n\n//# sourceMappingURL=PieChart.46d244d3.js.map\n","import React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport PropTypes from 'prop-types';\nimport createTooltip from '../../partials/tooltip';\n\nfunction PieChart(props) {\n  const self = useRef();\n  const margin = {\n    top: 5,\n    right: 5,\n    bottom: 5,\n    left: 5,\n  };\n  const data = d3\n    .nest()\n    .key((d) => d[props.fields.x])\n\n    .rollup((v) => v.length)\n    .entries(props.data);\n\n  const sum = d3.sum(data, (d) => d.value);\n  const pie = d3\n    .pie()\n    .sortValues((a, b) => b - a)\n    .value((d) => d.value);\n\n  const arcs = pie(data);\n\n  useEffect(() => {\n    setTimeout(() => {\n      // Remove old svg if any\n      d3.select(self.current).select('.tooltip').remove('.tooltip');\n      d3.select(self.current).selectAll('svg').remove('svg');\n\n      // calculate chart dimensions\n      const rect = self.current.getBoundingClientRect();\n      const innerWidth = rect.width - margin.left - margin.right;\n      const innerHeight = rect.height - margin.top - margin.bottom;\n      const radius = Math.min(innerWidth, innerHeight) / 2;\n\n      const arc = d3.arc().innerRadius(0).outerRadius(radius);\n\n      const color = d3\n        .scaleOrdinal()\n        .domain(data.map((d) => d.key))\n        .range(d3.quantize((t) => d3.interpolateSpectral(t), data.length));\n\n      const svg = d3\n        .select(self.current)\n        .append('svg')\n        .attr('width', rect.width)\n        .attr('height', rect.height);\n\n      const viewer = svg\n        .append('g')\n        .attr(\n          'transform',\n          `translate(${innerWidth / 2 + margin.left},${innerHeight / 2 + margin.top})`,\n        );\n\n      if (innerWidth > 500) {\n        const legendG = svg\n          .selectAll('.legend')\n          .data(arcs)\n          .enter()\n          .append('g')\n          .attr('transform', (d, i) => `translate(${innerWidth - 110},${i * 15 + 20})`)\n          .attr('class', 'legend');\n\n        legendG\n          .append('rect') // make a matching color rect\n          .attr('width', 13)\n          .attr('height', 13)\n          .attr('fill', (d, i) => color(i))\n          .attr('stroke', 'grey')\n          .style('stroke-width', '1px');\n\n        legendG\n          .append('text') // add the text\n          .text((d) => `${d.value}  ${d.data.key}`)\n          .style('font-size', 15)\n          .attr('y', 13)\n          .attr('x', 15);\n      }\n\n      // create a tooltip\n      const addLabel = (d) => `Class: ${d.data.key} Count: ${d.data.value} \n      Percentage: ${d3.format('.0%')(d.data.value / sum)}`;\n      const offset = {\n        x: rect.width / 2 + 20,\n        y: rect.height / 2,\n      };\n      const tooltipHandlers = createTooltip(self.current, addLabel, offset);\n\n      const onClick = (d) => {\n        d.data.selected = !d.data.selected;\n        const values = data.reduce((value, point) => {\n          if (point.selected) value.push(point.key);\n          return value;\n        }, []);\n        if (values.length > 0) {\n          const filter = {\n            id: props.id,\n            title: props.title,\n            field: props.fields.x,\n            operation: 'in',\n            values,\n          };\n          props.filterAdded([filter]);\n        } else {\n          props.filterRemove(props.id);\n        }\n      };\n\n      const pies = viewer\n        .selectAll('path')\n        .data(arcs)\n        .join('path')\n        .attr('class', 'slide')\n        .attr('fill', (d) => color(d.data.key))\n        .attr('d', arc)\n        .on('mousemove', tooltipHandlers.mousemove)\n        .on('mouseleave', tooltipHandlers.mouseleave)\n        .on('click', onClick);\n\n      const filters = props.filters.filter((f) => f.id === props.id);\n      if (filters.length > 0) {\n        filters[0].values.forEach((value) => {\n          data.forEach((d) => {\n            if (d.key === value) d.selected = true;\n          });\n        });\n      }\n      if (filters.length > 0) {\n        pies\n          .attr('fill', (d) => (d.data.selected ? color(d.data.key) : '#C0C0C0'))\n          .attr('fill-opacity', (d) => (d.data.selected ? 1 : 0.5))\n          .attr('stroke', '#CCCCCC')\n          .attr('stroke-width', (d) => (d.data.selected ? 3 : 0));\n      } else {\n        data.forEach((d) => {\n          d.selected = false;\n        });\n        pies\n          .attr('fill', (d) => color(d.data.key))\n          .attr('fill-opacity', 1)\n          .attr('stroke', 'none');\n      }\n    }, 100);\n  }, [props.layout, props.filters]);\n\n  return (\n    <div style={{ width: '100%', height: '100%' }}>\n      <div role=\"figure\" id={props.id} ref={self} style={{ width: '100%', height: '100%' }} />\n    </div>\n  );\n}\n\nexport default PieChart;\n\nPieChart.propTypes = {\n  data: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  fields: PropTypes.shape({ x: PropTypes.string.isRequired }).isRequired,\n  id: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  filters: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  filterAdded: PropTypes.func.isRequired,\n  filterRemove: PropTypes.func.isRequired,\n  layout: PropTypes.shape({\n    width: PropTypes.number.isRequired,\n    currentCols: PropTypes.number.isRequired,\n  }).isRequired,\n};\n","import * as d3 from 'd3';\n\n/**\n * @function createTooltip\n * @description creates a tooltip dev and mount it to\n * the chart\n * @param {*} mount reference to the chart to mount tooltip on\n * @param {Function} addLabel function to generate text inside tooltip\n * @param {Object} offset the x and y offset from mouse position to position tooltip\n * @returns {Object} contains to function mousemove and mouseleave handlers\n */\n\nfunction createTooltip(mount, addLabel, offset) {\n  const tooltip = d3\n    .select(mount)\n    .append('div')\n    .style('opacity', 1)\n    .attr('class', 'tooltip')\n    .style('display', 'none')\n    .style('background-color', 'white')\n    .style('border', 'solid')\n    .style('border-width', '2px')\n    .style('border-radius', '5px')\n    .style('padding', '5px');\n\n  const mousemove = function move(d) {\n    tooltip\n      .html(addLabel(d))\n      .style('display', '')\n      .style('left', `${offset.x + d3.mouse(this)[0]}px`)\n      .style('top', `${offset.y + d3.mouse(this)[1]}px`);\n  };\n\n  const mouseleave = function leave() {\n    tooltip.style('display', 'none');\n  };\n\n  return { mousemove, mouseleave };\n}\n\nexport default createTooltip;\n"],"names":["parcelRequire","$parcel$global","globalThis","parcelRegister","register","module","exports","$3aa3e19e5db4a062$var$_typeof","o","Symbol","iterator","constructor","prototype","Object","defineProperty","value","$3aa3e19e5db4a062$var$_react","$3aa3e19e5db4a062$var$_interopRequireWildcard","$3aa3e19e5db4a062$var$d3","$3aa3e19e5db4a062$var$_propTypes","$3aa3e19e5db4a062$var$_interopRequireDefault","$3aa3e19e5db4a062$var$_tooltip","e","__esModule","$3aa3e19e5db4a062$var$_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","$3aa3e19e5db4a062$var$PieChart","props","self","useRef","data","nest","key","d","fields","x","rollup","v","length","entries","sum","arcs","pie","sortValues","b","useEffect","setTimeout","select","current","remove","selectAll","rect","getBoundingClientRect","innerWidth","width","innerHeight","height","radius","Math","min","arc","innerRadius","outerRadius","color","scaleOrdinal","domain","map","range","quantize","interpolateSpectral","svg","append","attr","viewer","concat","legendG","enter","style","text","offset","y","tooltipHandlers","format","pies","join","on","mousemove","mouseleave","selected","values","reduce","point","push","filter","id","title","field","operation","filterAdded","filterRemove","filters","f","forEach","layout","createElement","role","ref","propTypes","arrayOf","shape","isRequired","string","func","number","currentCols","$895b11a613892f4e$var$_typeof","$895b11a613892f4e$var$d3","$895b11a613892f4e$var$_interopRequireWildcard","$895b11a613892f4e$var$_getRequireWildcardCache","mount","addLabel","tooltip","html","mouse","_react","_interopRequireWildcard","require","d3","_propTypes","_interopRequireDefault","_tooltip","_getRequireWildcardCache","_typeof","PieChart","margin","top","right","bottom","left","createTooltip","onClick","_default","PropTypes","move","leave"],"version":3,"file":"PieChart.46d244d3.js.map"}