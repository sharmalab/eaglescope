{"mappings":"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","sources":["<anon>","source/components/VisualTools/Chart/ParallelCoordinates.js"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequire94c2\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"d2VX5\", function(module, exports) {\n\"use strict\";\nfunction $97f86a5098f2390d$var$_typeof(o) {\n    \"@babel/helpers - typeof\";\n    return $97f86a5098f2390d$var$_typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(o) {\n        return typeof o;\n    } : function(o) {\n        return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, $97f86a5098f2390d$var$_typeof(o);\n}\nObject.defineProperty(module.exports, \"__esModule\", {\n    value: true\n});\nmodule.exports[\"default\"] = void 0;\n\nvar $97f86a5098f2390d$var$_react = $97f86a5098f2390d$var$_interopRequireWildcard((parcelRequire(\"acw62\")));\n\nvar $97f86a5098f2390d$var$d3 = $97f86a5098f2390d$var$_interopRequireWildcard((parcelRequire(\"9NlP8\")));\n\nvar $97f86a5098f2390d$var$_propTypes = $97f86a5098f2390d$var$_interopRequireDefault((parcelRequire(\"c9Z8w\")));\n\nvar $63tWu = parcelRequire(\"63tWu\");\nfunction $97f86a5098f2390d$var$_interopRequireDefault(e) {\n    return e && e.__esModule ? e : {\n        \"default\": e\n    };\n}\nfunction $97f86a5098f2390d$var$_getRequireWildcardCache(e) {\n    if (\"function\" != typeof WeakMap) return null;\n    var r = new WeakMap(), t = new WeakMap();\n    return ($97f86a5098f2390d$var$_getRequireWildcardCache = function _getRequireWildcardCache(e) {\n        return e ? t : r;\n    })(e);\n}\nfunction $97f86a5098f2390d$var$_interopRequireWildcard(e, r) {\n    if (!r && e && e.__esModule) return e;\n    if (null === e || \"object\" != $97f86a5098f2390d$var$_typeof(e) && \"function\" != typeof e) return {\n        \"default\": e\n    };\n    var t = $97f86a5098f2390d$var$_getRequireWildcardCache(r);\n    if (t && t.has(e)) return t.get(e);\n    var n = {\n        __proto__: null\n    }, a = Object.defineProperty && Object.getOwnPropertyDescriptor;\n    for(var u in e)if (\"default\" !== u && ({}).hasOwnProperty.call(e, u)) {\n        var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;\n        i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];\n    }\n    return n[\"default\"] = e, t && t.set(e, n), n;\n}\nfunction $97f86a5098f2390d$var$ParallelCoordinates(props) {\n    var self = (0, $97f86a5098f2390d$var$_react.useRef)();\n    var foregroundRef = (0, $97f86a5098f2390d$var$_react.useRef)();\n    var backgroundRef = (0, $97f86a5098f2390d$var$_react.useRef)();\n    var dimensions = props.fields.y;\n    var scales = (0, $97f86a5098f2390d$var$_react.useRef)({\n        x: $97f86a5098f2390d$var$d3.scalePoint(),\n        y: {}\n    });\n    var margin = {\n        top: 25,\n        right: 40,\n        bottom: 20,\n        left: 40\n    };\n    function path(d, ctx) {\n        ctx.beginPath();\n        dimensions.forEach(function(p, i) {\n            if (i === 0) ctx.moveTo(scales.current.x(p), scales.current.y[p](d[p]));\n            else ctx.lineTo(scales.current.x(p), scales.current.y[p](d[p]));\n        });\n        ctx.stroke();\n    }\n    function brush() {\n        if (!$97f86a5098f2390d$var$d3.event.selection) return;\n        var field = dimensions.filter(function(d) {\n            return scales.current.y[d].brush === $97f86a5098f2390d$var$d3.event.target;\n        })[0];\n        var _ref = [\n            $97f86a5098f2390d$var$d3.event.selection[0],\n            $97f86a5098f2390d$var$d3.event.selection[1]\n        ], x1 = _ref[0], x0 = _ref[1];\n        props.filterAdded([\n            {\n                id: props.id,\n                title: props.title,\n                field: field,\n                operation: 'range',\n                values: [\n                    (0, $63tWu.numFixed)(scales.current.y[field].invert(x0)),\n                    (0, $63tWu.numFixed)(scales.current.y[field].invert(x1))\n                ]\n            }\n        ]);\n    }\n    (0, $97f86a5098f2390d$var$_react.useEffect)(function() {\n        setTimeout(function() {\n            $97f86a5098f2390d$var$d3.select(self.current).selectAll('canvas').remove('canvas');\n            $97f86a5098f2390d$var$d3.select(self.current).selectAll('svg').remove('svg');\n            var rect = self.current.getBoundingClientRect();\n            var innerWidth = rect.width - margin.left - margin.right;\n            var innerHeight = rect.height - margin.top - margin.bottom;\n            backgroundRef.current = $97f86a5098f2390d$var$d3.select(self.current).append('canvas').attr('width', innerWidth).attr('height', innerHeight).style('transform', \"translate(\".concat(margin.left, \"px,\").concat(margin.top, \"px)\"));\n            foregroundRef.current = $97f86a5098f2390d$var$d3.select(self.current).append('canvas').attr('width', innerWidth).attr('height', innerHeight).style('transform', \"translate(\".concat(margin.left, \"px,\").concat(margin.top - innerHeight - 5, \"px)\"));\n            backgroundRef.current = backgroundRef.current.node().getContext('2d');\n            foregroundRef.current = foregroundRef.current.node().getContext('2d');\n            foregroundRef.current.strokeStyle = 'rgba(0,100,160,0.24)';\n            backgroundRef.current.strokeStyle = 'rgba(0,0,0,0.1)';\n            var svg = $97f86a5098f2390d$var$d3.select(self.current).append('svg').attr('width', rect.width).attr('height', rect.height).style('transform', \"translate(\".concat(0, \"px,\", -2 * innerHeight - margin.top / 2, \"px)\")).append('g').style('transform', \"translate(\".concat(margin.left, \"px,\").concat(margin.top, \"px)\"));\n            scales.current.x.domain(dimensions);\n            scales.current.x.range([\n                0,\n                innerWidth\n            ], 1);\n            dimensions.forEach(function(d) {\n                scales.current.y[d] = $97f86a5098f2390d$var$d3.scaleLinear().domain($97f86a5098f2390d$var$d3.extent(props.data, function(p) {\n                    return +p[d];\n                })).range([\n                    innerHeight,\n                    0\n                ]);\n            });\n            var g = svg.selectAll('.dimension').data(dimensions).enter().append('g').attr('class', 'dimension').attr('transform', function(d) {\n                return \"translate(\".concat(scales.current.x(d), \")\");\n            });\n            // Add an axis and title.\n            g.append('g').attr('class', 'axis').each(function addAxis(d) {\n                $97f86a5098f2390d$var$d3.select(this).call($97f86a5098f2390d$var$d3.axisLeft(scales.current.y[d]));\n            }).append('text').style('text-anchor', 'middle').attr('y', -9).text(function(d) {\n                return d;\n            });\n            g.append('g').attr('class', 'brush').each(function addBrush(d) {\n                $97f86a5098f2390d$var$d3.select(this).call(scales.current.y[d].brush = $97f86a5098f2390d$var$d3.brushY().extent([\n                    [\n                        -10,\n                        0\n                    ],\n                    [\n                        10,\n                        innerHeight\n                    ]\n                ]).on('end', brush));\n            }).selectAll('rect').attr('x', -8).attr('width', 16);\n        }, 100);\n    }, [\n        props.layout\n    ]);\n    (0, $97f86a5098f2390d$var$_react.useEffect)(function() {\n        setTimeout(function() {\n            if (!props.filterData) return;\n            var rect = self.current.getBoundingClientRect();\n            var innerWidth = rect.width - margin.left - margin.right;\n            var innerHeight = rect.height - margin.top - margin.bottom;\n            // Render selected lines\n            foregroundRef.current.clearRect(0, 0, innerWidth + 1, innerHeight + 1);\n            backgroundRef.current.clearRect(0, 0, innerWidth + 1, innerHeight + 1);\n            if (props.filters.length === 0) props.data.forEach(function(d) {\n                path(d, foregroundRef.current);\n            });\n            else props.data.forEach(function(d) {\n                if (props.filterData.includes(d)) path(d, foregroundRef.current);\n                else path(d, backgroundRef.current);\n            });\n        }, 100);\n    }, [\n        props.filters,\n        props.filterData,\n        props.layout\n    ]);\n    return /*#__PURE__*/ $97f86a5098f2390d$var$_react[\"default\"].createElement(\"div\", {\n        id: props.id,\n        ref: self,\n        role: \"figure\",\n        style: {\n            width: '100%',\n            height: '100%'\n        }\n    });\n}\nvar $97f86a5098f2390d$var$_default = module.exports[\"default\"] = $97f86a5098f2390d$var$ParallelCoordinates;\n$97f86a5098f2390d$var$ParallelCoordinates.propTypes = {\n    title: $97f86a5098f2390d$var$_propTypes[\"default\"].string.isRequired,\n    data: $97f86a5098f2390d$var$_propTypes[\"default\"].arrayOf($97f86a5098f2390d$var$_propTypes[\"default\"].shape({})).isRequired,\n    filterData: $97f86a5098f2390d$var$_propTypes[\"default\"].arrayOf($97f86a5098f2390d$var$_propTypes[\"default\"].shape({})).isRequired,\n    fields: $97f86a5098f2390d$var$_propTypes[\"default\"].shape({\n        y: $97f86a5098f2390d$var$_propTypes[\"default\"].arrayOf($97f86a5098f2390d$var$_propTypes[\"default\"].string).isRequired\n    }).isRequired,\n    id: $97f86a5098f2390d$var$_propTypes[\"default\"].string.isRequired,\n    filters: $97f86a5098f2390d$var$_propTypes[\"default\"].arrayOf($97f86a5098f2390d$var$_propTypes[\"default\"].shape({})).isRequired,\n    filterAdded: $97f86a5098f2390d$var$_propTypes[\"default\"].func.isRequired,\n    layout: $97f86a5098f2390d$var$_propTypes[\"default\"].shape({\n        width: $97f86a5098f2390d$var$_propTypes[\"default\"].number.isRequired,\n        currentCols: $97f86a5098f2390d$var$_propTypes[\"default\"].number.isRequired\n    }).isRequired\n};\n\n});\n\n\n//# sourceMappingURL=ParallelCoordinates.fb0124fd.js.map\n","import React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport PropTypes from 'prop-types';\nimport { numFixed } from '../../../common/utils';\n\nfunction ParallelCoordinates(props) {\n  const self = useRef();\n  const foregroundRef = useRef();\n  const backgroundRef = useRef();\n  const dimensions = props.fields.y;\n  const scales = useRef({\n    x: d3.scalePoint(),\n    y: {},\n  });\n  const margin = {\n    top: 25,\n    right: 40,\n    bottom: 20,\n    left: 40,\n  };\n\n  function path(d, ctx) {\n    ctx.beginPath();\n    dimensions.forEach((p, i) => {\n      if (i === 0) {\n        ctx.moveTo(scales.current.x(p), scales.current.y[p](d[p]));\n      } else {\n        ctx.lineTo(scales.current.x(p), scales.current.y[p](d[p]));\n      }\n    });\n    ctx.stroke();\n  }\n\n  function brush() {\n    if (!d3.event.selection) return;\n    const field = dimensions.filter((d) => scales.current.y[d].brush === d3.event.target)[0];\n    const [x1, x0] = [d3.event.selection[0], d3.event.selection[1]];\n    props.filterAdded([\n      {\n        id: props.id,\n        title: props.title,\n        field,\n        operation: 'range',\n        values: [\n          numFixed(scales.current.y[field].invert(x0)),\n          numFixed(scales.current.y[field].invert(x1)),\n        ],\n      },\n    ]);\n  }\n\n  useEffect(() => {\n    setTimeout(() => {\n      d3.select(self.current).selectAll('canvas').remove('canvas');\n      d3.select(self.current).selectAll('svg').remove('svg');\n\n      const rect = self.current.getBoundingClientRect();\n      const innerWidth = rect.width - margin.left - margin.right;\n      const innerHeight = rect.height - margin.top - margin.bottom;\n\n      backgroundRef.current = d3\n        .select(self.current)\n        .append('canvas')\n        .attr('width', innerWidth)\n        .attr('height', innerHeight)\n        .style('transform', `translate(${margin.left}px,${margin.top}px)`);\n\n      foregroundRef.current = d3\n        .select(self.current)\n        .append('canvas')\n        .attr('width', innerWidth)\n        .attr('height', innerHeight)\n        .style('transform', `translate(${margin.left}px,${margin.top - innerHeight - 5}px)`);\n\n      backgroundRef.current = backgroundRef.current.node().getContext('2d');\n      foregroundRef.current = foregroundRef.current.node().getContext('2d');\n\n      foregroundRef.current.strokeStyle = 'rgba(0,100,160,0.24)';\n      backgroundRef.current.strokeStyle = 'rgba(0,0,0,0.1)';\n\n      const svg = d3\n        .select(self.current)\n        .append('svg')\n        .attr('width', rect.width)\n        .attr('height', rect.height)\n        .style('transform', `translate(${0}px,${-2 * innerHeight - margin.top / 2}px)`)\n        .append('g')\n        .style('transform', `translate(${margin.left}px,${margin.top}px)`);\n\n      scales.current.x.domain(dimensions);\n      scales.current.x.range([0, innerWidth], 1);\n\n      dimensions.forEach((d) => {\n        scales.current.y[d] = d3\n          .scaleLinear()\n          .domain(d3.extent(props.data, (p) => +p[d]))\n          .range([innerHeight, 0]);\n      });\n\n      const g = svg\n        .selectAll('.dimension')\n        .data(dimensions)\n        .enter()\n        .append('g')\n        .attr('class', 'dimension')\n        .attr('transform', (d) => `translate(${scales.current.x(d)})`);\n\n      // Add an axis and title.\n      g.append('g')\n        .attr('class', 'axis')\n        .each(function addAxis(d) {\n          d3.select(this).call(d3.axisLeft(scales.current.y[d]));\n        })\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('y', -9)\n        .text((d) => d);\n\n      g.append('g')\n        .attr('class', 'brush')\n        .each(function addBrush(d) {\n          d3.select(this).call(\n            (scales.current.y[d].brush = d3\n              .brushY()\n              .extent([\n                [-10, 0],\n                [10, innerHeight],\n              ])\n              .on('end', brush)),\n          );\n        })\n        .selectAll('rect')\n        .attr('x', -8)\n        .attr('width', 16);\n    }, 100);\n  }, [props.layout]);\n\n  useEffect(() => {\n    setTimeout(() => {\n      if (!props.filterData) return;\n      const rect = self.current.getBoundingClientRect();\n      const innerWidth = rect.width - margin.left - margin.right;\n      const innerHeight = rect.height - margin.top - margin.bottom;\n\n      // Render selected lines\n      foregroundRef.current.clearRect(0, 0, innerWidth + 1, innerHeight + 1);\n      backgroundRef.current.clearRect(0, 0, innerWidth + 1, innerHeight + 1);\n      if (props.filters.length === 0) {\n        props.data.forEach((d) => {\n          path(d, foregroundRef.current);\n        });\n      } else {\n        props.data.forEach((d) => {\n          if (props.filterData.includes(d)) {\n            path(d, foregroundRef.current);\n          } else {\n            path(d, backgroundRef.current);\n          }\n        });\n      }\n    }, 100);\n  }, [props.filters, props.filterData, props.layout]);\n\n  return <div id={props.id} ref={self} role=\"figure\" style={{ width: '100%', height: '100%' }} />;\n}\n\nexport default ParallelCoordinates;\n\nParallelCoordinates.propTypes = {\n  title: PropTypes.string.isRequired,\n  data: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  filterData: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  fields: PropTypes.shape({\n    y: PropTypes.arrayOf(PropTypes.string).isRequired,\n  }).isRequired,\n  id: PropTypes.string.isRequired,\n  filters: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  filterAdded: PropTypes.func.isRequired,\n  layout: PropTypes.shape({\n    width: PropTypes.number.isRequired,\n    currentCols: PropTypes.number.isRequired,\n  }).isRequired,\n};\n"],"names":["parcelRequire","$parcel$global","globalThis","parcelRegister","register","module","exports","$97f86a5098f2390d$var$_typeof","o","Symbol","iterator","constructor","prototype","Object","defineProperty","value","e","$97f86a5098f2390d$var$_react","$97f86a5098f2390d$var$_interopRequireWildcard","$97f86a5098f2390d$var$d3","$97f86a5098f2390d$var$_propTypes","__esModule","$63tWu","$97f86a5098f2390d$var$_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","$97f86a5098f2390d$var$ParallelCoordinates","props","self","useRef","foregroundRef","backgroundRef","dimensions","fields","y","scales","x","scalePoint","margin","top","right","bottom","left","path","d","ctx","beginPath","forEach","p","moveTo","current","lineTo","stroke","brush","event","selection","field","filter","target","_ref","x1","x0","filterAdded","id","title","operation","values","numFixed","invert","useEffect","setTimeout","select","selectAll","remove","rect","getBoundingClientRect","innerWidth","width","innerHeight","height","append","attr","style","concat","node","getContext","strokeStyle","svg","domain","range","scaleLinear","extent","data","g","enter","each","axisLeft","text","brushY","on","layout","filterData","clearRect","filters","length","includes","createElement","ref","role","propTypes","string","isRequired","arrayOf","shape","func","number","currentCols","_react","_interopRequireWildcard","require","d3","_propTypes","_interopRequireDefault","_utils","_getRequireWildcardCache","_typeof","ParallelCoordinates","addAxis","addBrush","_default","PropTypes"],"version":3,"file":"ParallelCoordinates.fb0124fd.js.map"}