function e(e){return e&&e.__esModule?e.default:e}function t(e,t,a,l){Object.defineProperty(e,t,{get:a,set:l,enumerable:!0,configurable:!0})}var a=globalThis.parcelRequire94c2,l=a.register;l("528GW",function(l,r){Object.defineProperty(l.exports,"__esModule",{value:!0,configurable:!0}),t(l.exports,"default",()=>c);var i=a("ayMG0"),s=a("acw62"),d=a("9NlP8"),n=a("c9Z8w"),o=a("bN8Lq");function u(e){let t=(0,s.useRef)(),a=d.nest().key(t=>t[e.fields.x]).rollup(e=>e.length).entries(e.data),l=d.sum(a,e=>e.value),r=d.pie().sortValues((e,t)=>t-e).value(e=>e.value)(a);return(0,s.useEffect)(()=>{setTimeout(()=>{d.select(t.current).select(".tooltip").remove(".tooltip"),d.select(t.current).selectAll("svg").remove("svg");let i=t.current.getBoundingClientRect(),s=i.width-5-5,n=i.height-5-5,u=Math.min(s,n)/2,c=d.arc().innerRadius(0).outerRadius(u),f=d.scaleOrdinal().domain(a.map(e=>e.key)).range(d.quantize(e=>d.interpolateSpectral(e),a.length)),p=d.select(t.current).append("svg").attr("width",i.width).attr("height",i.height),h=p.append("g").attr("transform",`translate(${s/2+5},${n/2+5})`);if(s>500){let e=p.selectAll(".legend").data(r).enter().append("g").attr("transform",(e,t)=>`translate(${s-110},${15*t+20})`).attr("class","legend");e.append("rect").attr("width",13).attr("height",13).attr("fill",(e,t)=>f(t)).attr("stroke","grey").style("stroke-width","1px"),e.append("text").text(e=>`${e.value}  ${e.data.key}`).style("font-size",15).attr("y",13).attr("x",15)}let y={x:i.width/2+20,y:i.height/2},g=(0,o.default)(t.current,e=>`Class: ${e.data.key} Count: ${e.data.value} 
      Percentage: ${d.format(".0%")(e.data.value/l)}`,y),v=h.selectAll("path").data(r).join("path").attr("class","slide").attr("fill",e=>f(e.data.key)).attr("d",c).on("mousemove",g.mousemove).on("mouseleave",g.mouseleave).on("click",t=>{t.data.selected=!t.data.selected;let l=a.reduce((e,t)=>(t.selected&&e.push(t.key),e),[]);if(l.length>0){let t={id:e.id,title:e.title,field:e.fields.x,operation:"in",values:l};e.filterAdded([t])}else e.filterRemove(e.id)}),m=e.filters.filter(t=>t.id===e.id);m.length>0&&m[0].values.forEach(e=>{a.forEach(t=>{t.key===e&&(t.selected=!0)})}),m.length>0?v.attr("fill",e=>e.data.selected?f(e.data.key):"#C0C0C0").attr("fill-opacity",e=>e.data.selected?1:.5).attr("stroke","#CCCCCC").attr("stroke-width",e=>e.data.selected?3:0):(a.forEach(e=>{e.selected=!1}),v.attr("fill",e=>f(e.data.key)).attr("fill-opacity",1).attr("stroke","none"))},100)},[e.layout,e.filters]),(0,i.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,i.jsx)("div",{role:"figure",id:e.id,ref:t,style:{width:"100%",height:"100%"}})})}var c=u;u.propTypes={data:e(n).arrayOf(e(n).shape({})).isRequired,fields:e(n).shape({x:e(n).string.isRequired}).isRequired,id:e(n).string.isRequired,title:e(n).string.isRequired,filters:e(n).arrayOf(e(n).shape({})).isRequired,filterAdded:e(n).func.isRequired,filterRemove:e(n).func.isRequired,layout:e(n).shape({width:e(n).number.isRequired,currentCols:e(n).number.isRequired}).isRequired}}),l("bN8Lq",function(e,l){t(e.exports,"default",()=>i);var r=a("9NlP8"),i=function(e,t,a){let l=r.select(e).append("div").style("opacity",1).attr("class","tooltip").style("display","none").style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");return{mousemove:function(e){l.html(t(e)).style("display","").style("left",`${a.x+r.mouse(this)[0]}px`).style("top",`${a.y+r.mouse(this)[1]}px`)},mouseleave:function(){l.style("display","none")}}}});
//# sourceMappingURL=PieChart.1a9d2563.js.map
