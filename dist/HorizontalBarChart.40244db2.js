function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,i){Object.defineProperty(e,t,{get:r,set:i,enumerable:!0,configurable:!0})}var r=globalThis.parcelRequire94c2,i=r.register;i("2iOPo",function(i,l){Object.defineProperty(i.exports,"__esModule",{value:!0,configurable:!0}),t(i.exports,"default",()=>f);var a=r("acw62"),s=r("9NlP8"),n=r("c9Z8w"),d=r("bN8Lq");let u=(e,t)=>{let r=new Map;return e.forEach(e=>{let i=e[t];Array.isArray(i)?i.forEach(e=>{r.has(e)||r.set(e,0),r.set(e,r.get(e)+1)}):(r.has(i)||r.set(i,0),r.set(i,r.get(i)+1))}),Array.from(r).map(e=>({key:e[0],value:e[1]}))},o=(e,t,r=!1)=>{if(r)return u(e,t);let i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return s.nest().key(e=>e[t]).sortKeys(function(e,t){return i.compare(e,t)}).rollup(e=>e.length).entries(e)};function c(t){let r="value",i=o(t.data,t.fields.y,t.fields.isList),l=(0,a.useRef)(),n=(0,a.useRef)(),u=(0,a.useRef)(),c=(0,a.useRef)(),f=(e,t)=>s.scaleLinear().domain([0,s.max(i,t=>t[e])]).range([0,t]),y=(e,t)=>s.scaleBand().domain(i.map(t=>t[e])).range([t,0]).padding(.1),p=()=>{c.current.selectAll(".label").remove(),c.current.selectAll(".label").data(i,e=>e.key).enter().append("text").attr("class","label").attr("x",5).attr("y",e=>n.current.y(e.key)+n.current.y.bandwidth()/2+4).text(e=>e.key).on("click",e=>{let r={id:t.id,title:t.title,field:t.fields.y,operation:"eq",values:e.key};t.filterAdded([r])})},h=(e,i,a="og")=>{let s=(0,d.default)(l.current,e=>`${e.key}: ${e.value}`,{x:30,y:10}),u=e.selectAll(`rect.${a}`).data(i,e=>e.key),o=u.enter().append("rect");return o.attr("class",`${a}`).attr("x",0).attr("height",n.current.y.bandwidth()).attr("y",e=>n.current.y(e.key)),o.on("mousemove",s.mousemove).on("mouseleave",s.mouseleave).on("click",e=>{let r=o.filter(t=>t===e).data()[0].key,i=t?.fields?.isList?{id:t.id,title:t.title,field:t.fields.y,operation:"has",values:r}:{id:t.id,title:t.title,field:t.fields.y,operation:"eq",values:r};t.filterAdded([i])}),u.merge(o).transition().duration(1e3).attr("width",e=>n.current.x(e[r])).selectAll(".label").text(e=>e.key),u.exit().transition().duration(1e3).attr("width",0).remove(),u};return(0,a.useEffect)(()=>{setTimeout(()=>{s.select(l.current).selectAll("svg").remove("svg");let e=l.current.getBoundingClientRect(),t=e.width-10-10,a=e.height-10-35;u.current=a;let d=s.select(l.current).append("svg").attr("width",e.width).attr("height",e.height);c.current=d.append("g").attr("transform","translate(10,10)");let o=f(r,t),g=y("key",a);n.current={x:o,y:g},c.current.append("g").attr("transform",`translate(0,${a})`).call(s.axisBottom(o).tickSize(-a)),h(c.current,i,"og"),p()},100)},[t.layout]),(0,a.useEffect)(()=>{setTimeout(()=>{let e=[];e=t.filters.length>0?o(t.filterData,t.fields.y,t.fields.isList):i,h(c.current,e,"ft"),p()},100)},[t.filters,t.filterData,t.layout]),e(a).createElement("div",{id:t.id,ref:l,role:"figure",style:{width:"100%",height:"100%"}})}var f=c;c.propTypes={data:e(n).arrayOf(e(n).shape({})).isRequired,fields:e(n).shape({y:e(n).string.isRequired,isList:e(n).bool}).isRequired,id:e(n).string.isRequired,title:e(n).string.isRequired,filterData:e(n).arrayOf(e(n).shape({})).isRequired,filters:e(n).arrayOf(e(n).shape({})).isRequired,filterAdded:e(n).func.isRequired,layout:e(n).shape({width:e(n).number.isRequired,currentCols:e(n).number.isRequired}).isRequired}}),i("bN8Lq",function(e,i){t(e.exports,"default",()=>a);var l=r("9NlP8"),a=function(e,t,r){let i=l.select(e).append("div").style("opacity",1).attr("class","tooltip").style("display","none").style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");return{mousemove:function(e){i.html(t(e)).style("display","").style("left",`${r.x+l.mouse(this)[0]}px`).style("top",`${r.y+l.mouse(this)[1]}px`)},mouseleave:function(){i.style("display","none")}}}});
//# sourceMappingURL=HorizontalBarChart.40244db2.js.map
