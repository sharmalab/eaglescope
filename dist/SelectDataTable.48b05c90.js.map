{"version":3,"sources":["components/VisualTools/VisDataTable/SelectDataTable.js"],"names":["_react","_interopRequireWildcard","require","_reactVirtualized","_reactDraggable","_interopRequireDefault","_reactFontawesome","_freeSolidSvgIcons","_arrayMove","_propTypes","_VisDataTableControl","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_typeof","o","Symbol","iterator","constructor","prototype","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","Array","from","isArray","_arrayLikeToArray","_createForOfIteratorHelper","length","_n","F","s","done","value","f","next","return","toString","slice","name","test","ownKeys","keys","getOwnPropertySymbols","filter","enumerable","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","configurable","writable","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","toPrimitive","String","Number","_inherits","create","_setPrototypeOf","setPrototypeOf","bind","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","cellRenderer","d","bg","urlElt","link","url","field","urlbase","createElement","target","href","rowData","cellData","join","Fragment","dataKey","className","title","style","backgroundColor","rowClassName","_ref","index","SelectDataTable","exports","_PureComponent","_super","props","_this","console","log","fWidth","fields","map","width","isShow","state","sortBy","sortDirection","selected","marked","containerRef","React","createRef","autoSizer","headerRenderer","resizeRow","onResize","onSortEnd","onCheckChangedHandler","onAllCheckHandler","sortHandler","getSortData","_ref2","setState","_ref3","oldIndex","newIndex","_ref4","arrayMove","checked","_ref5","_ref6","getFileExt","slide_url","lastPart","substring","lastIndexOf","lastDotIndex","downloadSelected","_this2","downloadLimit","configProps","data","alert","_iterator","_step","_loop","x","prevState","indexOf","concat","err","_iterator2","_step2","_loop2","record","fetch","mode","then","json","collectionId","y","collectionDoc","collectionName","window","location","protocol","replace","subId","error","imageId","filename","document","download","body","appendChild","click","removeChild","catch","collator","Intl","Collator","undefined","numeric","sensitivity","_this$props","filterData","filters","_this$state","currentData","sort","b","first","SortDirection","ASC","second","compare","_ref7","deltaX","prevFields","idx","findIndex","percentDelta","_ref8","_this3","label","FontAwesomeIcon","icon","DESC","faSortDown","faSortUp","faSort","axis","defaultClassName","defaultClassNameDragging","onDrag","event","_ref9","onStart","_ref10","onStop","_ref11","setTimeout","position","zIndex","onMouseDown","stopPropagation","selectionHandler","isChecked","item","downloadField","existingIndex","_ref12","isResize","render","_this4","_this$state2","finalData","ref","height","list","onCheckChanged","onAllCheck","AutoSizer","_ref13","Table","headerHeight","rowHeight","rowCount","rowGetter","_ref14","Column","onClick","faFileArrowDown","color","_ref15","type","includes","onChange","cellDataGetter","_ref16","PureComponent","propTypes","PropTypes","arrayOf","shape","isRequired"],"mappings":"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","file":"SelectDataTable.48b05c90.js","sourceRoot":"../source","sourcesContent":["import React, { PureComponent } from 'react';\nimport {\n  AutoSizer, Column, Table, SortDirection,\n} from 'react-virtualized';\nimport Draggable from 'react-draggable';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSortDown, faSortUp, faSort, faFileArrowDown } from '@fortawesome/free-solid-svg-icons';\nimport arrayMove from 'array-move';\nimport PropTypes from 'prop-types';\nimport VisDataTableControl from './VisDataTableControl/VisDataTableControl';\nimport './VisDataTable.css';\n\nconst cellRenderer = (d, f, bg) => {\n  let urlElt;\n  bg = bg || '';\n  if (f.link && (f.link.url || f.link.field)) {\n    const urlbase = f.link.url || '';\n    urlElt = (\n      <a target=\"_blank\" href={urlbase + d.rowData[f.link.field]}>\n        {d.cellData}\n      </a>\n    );\n  } else if (f.link && f.link.url) {\n    urlElt = (\n      <a target=\"_blank\" href={f.link.url}>\n        {d.cellData}\n      </a>\n    );\n  } else {\n    // urlElt = d.cellData;\n    urlElt = Array.isArray(d.cellData) ? d.cellData.join(', ') : d.cellData;\n  }\n  return (\n    <React.Fragment key={f.dataKey}>\n      <div className=\"ReactVirtualized__Table__headerTruncatedText\" title={d.cellData} style={{ backgroundColor: bg }}>\n        {urlElt}\n      </div>\n    </React.Fragment>\n  );\n};\n\nconst rowClassName = ({ index }) => {\n  if (index < 0) {\n    return 'headerRow';\n  }\n  return index % 2 === 0 ? 'evenRow' : 'oddRow';\n};\n\nexport default class SelectDataTable extends PureComponent {\n  constructor(props) {\n    console.log(\"constructed, showing props\")\n    console.log(props)\n    super(props);\n    const fWidth = 1 / this.props.fields.length;\n    let fields = this.props.fields.map((f) => ({ ...f, width: fWidth, isShow: true }));\n    //fields = fields.unshift({width: 50, isShow: true})\n    this.state = {\n      fields,\n      width: null,\n      sortBy: null,\n      sortDirection: null,\n      selected: [],\n      marked: []\n    };\n    this.containerRef = React.createRef();\n    this.autoSizer = React.createRef();\n    this.headerRenderer = this.headerRenderer.bind(this);\n    this.resizeRow = this.resizeRow.bind(this);\n    this.onResize = this.onResize.bind(this);\n    this.onSortEnd = this.onSortEnd.bind(this);\n    this.onCheckChangedHandler = this.onCheckChangedHandler.bind(this);\n    this.onAllCheckHandler = this.onAllCheckHandler.bind(this);\n    this.sortHandler = this.sortHandler.bind(this);\n    this.getSortData = this.getSortData.bind(this);\n  }\n\n  onResize({ width }) {\n    this.setState({ width });\n  }\n\n  onSortEnd({ oldIndex, newIndex }) {\n    this.setState(({ fields }) => ({\n      fields: arrayMove(fields, oldIndex, newIndex),\n    }));\n  }\n\n  onCheckChangedHandler(e) {\n    const { value } = e.target;\n    const { checked } = e.target;\n    this.setState(({ fields }) => ({\n      fields: fields.map((f) => {\n        f.isShow = f.dataKey === value ? checked : f.isShow;\n        return { ...f };\n      }),\n    }));\n  }\n\n  onAllCheckHandler() {\n    this.setState(({ fields }) => ({\n      fields: fields.map((f) => {\n        f.isShow = true;\n        return { ...f };\n      }),\n    }));\n  }\n\n  getFileExt(slide_url) {\n    // gets the extension. if no extension, then entire last path elem\n    // functionally should get the last thing separated by either / or .\n    let lastPart = slide_url.substring(slide_url.lastIndexOf('/') + 1);\n    let lastDotIndex = lastPart.lastIndexOf('.');\n    if (lastDotIndex !== -1) {\n        return lastPart.substring(lastDotIndex + 1);\n    }\n    return lastPart;\n}\n\n  downloadSelected() {\n    let downloadLimit = this.props.configProps.downloadLimit || 15;\n    let data = this.state.selected\n    if (data.length > downloadLimit){\n      data = data.slice(0, downloadLimit);\n      alert(\"Limiting download to first \" + downloadLimit)\n    }\n    for (let x of data) {\n      this.setState(prevState => {\n        if (prevState.marked.indexOf(x) === -1) {\n          return {\n            marked: [...prevState.marked, x]\n          };\n        }\n        return null;\n      });\n    }\n    this.setState({\"selected\":[]});\n\n    console.log(data)\n    console.log(\"about to try?\")\n    console.log(this.props.configProps)\n    // trigger downloads from pathdb\n    for (let record of data){\n        console.log(\"inside loop\")\n        console.log(\"trying to get metadata for slide with pathdb id\", record)\n        fetch(\"/node/\" + record + \"?_format=json\", {mode: \"cors\"}).then(x=>x.json()).then(x=>{ \n          let collectionId = x['field_collection'][0]['target_id'];\n          // look for collection in pathdb\n          fetch(\"/taxonomy/term/\" + collectionId + \"?_format=json\", {mode: \"cors\"}).then(y=>y.json()).then(collectionDoc=>{\n            let collectionName = collectionDoc['name']['0']['value'];\n            console.log(\"looking at wsi url: \", x['field_wsiimage'][0]['url'])\n            let slide_url = x['field_wsiimage'][0]['url']\n            if (window.location.protocol === \"https:\") {\n              slide_url = slide_url.replace(/^http:\\/\\//i, 'https://');\n            }\n            console.log(\"using anchor method\")\n            //let filename = slide_url.substring(slide_url.lastIndexOf('/') + 1);\n            let subId = \"subject\";\n            try {\n              subId = x['clinicaltrialsubjectid'][0]['value'];\n            } catch (error) {\n              console.log(\"subject id missing for download, just using 'image'\");\n              console.error(error);\n            }\n            let imageId = record;\n            try {\n              imageId = x['imageid'][0]['value'];\n            } catch (error) {\n              console.log(\"image id missing for download, just using pathdb id\");\n              console.error(error);\n            }\n            let filename = collectionName + \"_\" + subId + \"_\" + imageId + \".\" + this.getFileExt(slide_url);\n            const a = document.createElement('a');\n            a.href = slide_url;\n            a.download = filename;\n            document.body.appendChild(a);\n            a.click();\n            document.body.removeChild(a);\n          })\n\n        }).catch(console.error)\n    }\n  }\n\n  getSortData() {\n    const collator = new Intl.Collator(undefined, { numeric: true, sensitivity: 'base' });\n    const { data, filterData, filters } = this.props;\n    const { sortBy, sortDirection } = this.state;\n    const currentData = filters.length > 0 ? filterData : data;\n\n    return sortBy && sortDirection\n      ? currentData.sort((a, b) => {\n        const first = sortDirection === SortDirection.ASC ? a : b;\n        const second = sortDirection === SortDirection.ASC ? b : a;\n        return collator.compare(first[sortBy], second[sortBy]);\n      })\n      : currentData;\n  }\n\n  resizeRow({ dataKey, deltaX }) {\n    const prevFields = this.state.fields;\n    const idx = prevFields.findIndex((f) => f.dataKey === dataKey);\n\n    const percentDelta = deltaX / this.state.width;\n    prevFields[idx].width += percentDelta;\n\n    if (idx < prevFields.length - 1) {\n      prevFields[idx + 1].width = prevFields[idx + 1].width - percentDelta;\n    }\n    this.setState({ fields: [...prevFields] });\n  }\n\n  headerRenderer({\n    dataKey, label, sortBy, sortDirection,\n  }) {\n    return (\n      <React.Fragment key={dataKey}>\n        <div className=\"ReactVirtualized__Table__headerTruncatedText\" title={label}>\n          {label}\n        </div>\n        {}\n        <div>\n          {sortBy === dataKey ? (\n            <FontAwesomeIcon icon={sortDirection === SortDirection.DESC ? faSortDown : faSortUp} />\n          ) : (\n            <FontAwesomeIcon icon={faSort} />\n          )}\n        </div>\n        <Draggable\n          axis=\"x\"\n          defaultClassName=\"DragHandle\"\n          defaultClassNameDragging=\"DragHandleActive\"\n          onDrag={(event, { deltaX }) => {\n            this.resizeRow({ dataKey, deltaX });\n          }}\n          onStart={(event, { deltaX }) => {\n            this.setState({\"isResize\": true});\n          }}\n          onStop={(event, { deltaX }) => {\n            setTimeout(() => {\n              this.setState({\"isResize\": false})\n            }, 300);  // 300 milliseconds delay\n          }}\n          position={{ x: 0 }}\n          zIndex={999}\n        >\n          <span className=\"DragHandleIcon\" onMouseDown={(event) => event.stopPropagation()}>⋮</span>\n        </Draggable>\n      </React.Fragment>\n    );\n  }\n\n  selectionHandler(isChecked, rowData){\n    let downloadLimit = this.props.configProps.downloadLimit || 15;\n    console.log(\"chexmix\", isChecked, rowData)\n    const { selected } = this.state;\n    console.log(\"state selected before change\", selected)\n    let item = rowData[this.props.configProps.downloadField];\n    const existingIndex = selected.indexOf(item);\n    // if check is true, add to state\n    if (isChecked && existingIndex === -1) {\n      this.setState(prevState => ({\n        selected: [...prevState.selected, item]\n      }));\n    }\n      // if check is false, remove from state\n    if (!isChecked && existingIndex !== -1) {\n      this.setState(prevState => ({\n        selected: prevState.selected.filter(x => x !== item)\n      }));\n    }\n    if (this.state.selected.length > downloadLimit - 2) {\n      alert(\"Warning: We limit to at most \" + downloadLimit + \" concurrent downloads.\")\n    }\n  }\n\n  sortHandler({ sortBy, sortDirection }) {\n\n    if (!this.state.isResize){\n      this.setState({ sortBy, sortDirection });\n    }\n  }\n\n  render() {\n    const { fields, sortBy, sortDirection, selected, marked } = this.state;\n    const finalData = this.getSortData();\n    return (\n      <div ref={this.containerRef} style={{ width: '100%', height: '100%' }}>\n        <VisDataTableControl\n          list={fields}\n          onSortEnd={this.onSortEnd}\n          onCheckChanged={this.onCheckChangedHandler}\n          onAllCheck={this.onAllCheckHandler}\n        />\n        <AutoSizer ref={this.autoSizer} onResize={this.onResize}>\n          {({ width, height }) => (\n            <Table\n              width={width}\n              height={height}\n              headerHeight={25}\n              rowHeight={20}\n              rowClassName={rowClassName}\n              rowCount={finalData.length}\n              rowGetter={({ index }) => finalData[index]}\n              sort={this.sortHandler}\n              sortBy={sortBy}\n              sortDirection={sortDirection}\n            >\n              <Column\n                key=\"checkbox\"\n                dataKey=\"checkbox\"\n                width={50} // Adjust width as needed\n                label=\"↓\"\n                headerRenderer={() => <div title=\"Download Selected Files\" onClick={(e) => { this.downloadSelected() }}> <FontAwesomeIcon icon={faFileArrowDown} style={{ height: '1.8em', color: '#1b7d00' }} /></div>}\n                cellRenderer={({ rowData }) => (\n                  <input\n                    type=\"checkbox\"\n                    checked={selected.includes(rowData[this.props.configProps.downloadField])}\n                    onChange={(e) => this.selectionHandler(e.target.checked, rowData)}\n                  />\n                )}\n              />\n              {fields\n                .map((f) => (\n                  <Column\n                    key={f.dataKey}\n                    cellDataGetter={({ rowData }) => rowData[f.dataKey]}\n                    dataKey={f.dataKey}\n                    label={f.label}\n                    width={width * f.width}\n                    headerRenderer={this.headerRenderer}\n                    cellRenderer={(d) => {\n                      let color = marked.includes(d.rowData[this.props.configProps.downloadField])? 'lightGray': '';\n                      return cellRenderer(d, f, color)\n                    }}\n                  />\n                ))}\n            </Table>\n          )}\n        </AutoSizer>\n      </div>\n    );\n  }\n}\n\nSelectDataTable.propTypes = {\n  data: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  filterData: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  fields: PropTypes.arrayOf(PropTypes.shape()).isRequired,\n  filters: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n};\n"]}