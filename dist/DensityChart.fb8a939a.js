var e=globalThis.parcelRequire94c2;(0,e.register)("lSqO9",function(t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var a,i=s(e("acw62")),u=s(e("9NlP8")),l=(a=e("c9Z8w"))&&a.__esModule?a:{default:a},c=e("63tWu");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&({}).hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=e[u]}return a.default=e,r&&r.set(e,a),a}function d(e){var t=[0,0],r=[0,0],n=(0,i.useRef)(),a=(0,i.useRef)(),l=(0,i.useRef)({x:u.scaleLinear(),y:u.scaleLinear()}),o=function(){if(u.event.selection){var n=[Math.min(t[0],r[0]),Math.min(t[1],r[1])],a=n[0],i=n[1],o=[Math.max(t[0],r[0]),Math.max(t[1],r[1])],s=o[0],d=o[1],f=[{id:"".concat(e.id,"_x"),title:e.title,field:e.fields.x,operation:"range",values:[(0,c.numFixed)(l.current.x.invert(a)),(0,c.numFixed)(l.current.x.invert(s))]},{id:"".concat(e.id,"_y"),title:e.title,field:e.fields.y,operation:"range",values:[(0,c.numFixed)(l.current.y.invert(d)),(0,c.numFixed)(l.current.y.invert(i))]}];e.filterAdded(f)}};return(0,i.useEffect)(function(){setTimeout(function(){u.select(n.current).selectAll("svg").remove("svg");var i=n.current.getBoundingClientRect(),c=i.width-40-30,s=i.height-10-20;a.current=u.select(n.current).append("svg").attr("width",i.width).attr("height",i.height).append("g").attr("transform","translate(".concat(40,",").concat(10,")"));var d=u.extent(e.data,function(t){return t[e.fields.x]}),f=(d[1]-d[0])*.1,p=u.extent(e.data,function(t){return t[e.fields.y]}),h=(p[1]-p[0])*.1;l.current.x.domain([d[0]-f,d[1]+f]).range([0,c]),l.current.y.domain([p[0]-h,p[1]+h]).range([s,0]),a.current.append("g").attr("transform","translate(0,".concat(s,")")).call(u.axisBottom(l.current.x)),a.current.append("g").call(u.axisLeft(l.current.y));var g=function(){var e=a.current.select(".overlay").node();return[u.event.sourceEvent.clientX-e.getBoundingClientRect().x,u.event.sourceEvent.clientY-e.getBoundingClientRect().y]},y=u.brush().extent([[0,0],[c,s]]).on("start",function(){t=g(),a.current.selectAll(".selection").remove("rect")}).on("brush",function(){r=g(),a.current.selectAll(".selected-area").remove(".selected-area"),a.current.selectAll(".selection").remove("rect");var e=Math.min(t[0],r[0]),n=Math.min(t[1],r[1]);a.current.append("rect").attr("class","selected-area").attr("position","absolute").attr("x",e).attr("y",n).attr("width",Math.abs(r[0]-t[0])).attr("height",Math.abs(r[1]-t[1])).attr("fill","rgba(130, 130, 130, 0.5)")}).on("end",function(){r=g(),a.current.selectAll(".selected-area").remove(".selected-area"),a.current.selectAll(".selection").remove("rect");var e=Math.min(t[0],r[0]),n=Math.min(t[1],r[1]),i=a.current.append("rect").attr("class","selected-area").attr("position","absolute").attr("x",e).attr("y",n).attr("width",Math.abs(r[0]-t[0])).attr("height",Math.abs(r[1]-t[1])).attr("fill","rgba(140, 140, 140, 0.5)");o(),setTimeout(function(){i.remove()},20)});a.current.append("g").call(y)},100)},[e.layout]),(0,i.useEffect)(function(){setTimeout(function(){var t=n.current.getBoundingClientRect(),r=t.width-40-30,i=t.height-10-20,c=e.data;0!==e.filters.length&&(c=e.filterData);var o=Math.pow(10,-4+Math.round(Math.log10(c.length))),s=u.scaleLinear().domain([0,o]).range(["white","#4682b4"]),d=u.contourDensity().x(function(t){return l.current.x(t[e.fields.x])}).y(function(t){return l.current.y(t[e.fields.y])}).size([r,i]).bandwidth(20)(c);a.current.select("#draw_area").remove("g"),a.current.insert("g","g").attr("id","draw_area").selectAll("path").data(d).enter().append("path").attr("d",u.geoPath()).attr("fill",function(e){return s(e.value)})},100)},[e.layout,e.filters,e.filterData]),i.default.createElement("div",{id:e.id,ref:n,role:"figure",style:{width:"100%",height:"100%"}})}t.exports.default=d,d.propTypes={data:l.default.arrayOf(l.default.shape({})).isRequired,fields:l.default.shape({x:l.default.string.isRequired,y:l.default.string.isRequired}).isRequired,id:l.default.string.isRequired,filterData:l.default.arrayOf(l.default.shape({})).isRequired,filters:l.default.arrayOf(l.default.shape({})).isRequired,layout:l.default.shape({width:l.default.number.isRequired,currentCols:l.default.number.isRequired}).isRequired,filterAdded:l.default.func.isRequired,title:l.default.string.isRequired}});
//# sourceMappingURL=DensityChart.fb8a939a.js.map
