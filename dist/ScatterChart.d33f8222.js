var t=globalThis.parcelRequire94c2;(0,t.register)("eoPnA",function(e,r){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var n,o=u(t("acw62")),a=u(t("9NlP8")),s=(n=t("c9Z8w"))&&n.__esModule?n:{default:n},l=t("63tWu");function c(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(c=function(t){return t?r:e})(t)}function u(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=i(t)&&"function"!=typeof t)return{default:t};var r=c(e);if(r&&r.has(t))return r.get(t);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&({}).hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}function f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(f=function(){return!!t})()}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(e.exports.default=function(t){var e;function r(t){var e,n,a;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,r),n=r,a=[t],n=d(n),(e=function(t,e){if(e&&("object"==i(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,f()?Reflect.construct(n,a||[],d(this).constructor):n.apply(this,a))).self=o.default.createRef(),e.state={margin:{top:5,right:10,bottom:25,left:25}},e.state.data=e.props.data.filter(function(t){return"N/A"!==t[e.props.fields.x]&&"N/A"!==t[e.props.fields.y]&&"N/A"!==t[e.props.fields.z]}),e}return!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(r,t),e=[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var t=this;setTimeout(function(){a.select(t.self.current).selectAll("canvas").remove("canvas"),a.select(t.self.current).selectAll("svg").remove("svg"),t.rect=t.self.current.getBoundingClientRect();var e=t.rect.width-t.state.margin.left-t.state.margin.right,r=t.rect.height-t.state.margin.top-t.state.margin.bottom;t.canvas=a.select(t.self.current).append("canvas").attr("width",e).attr("height",r).style("transform","translate(".concat(t.state.margin.left,"px,").concat(t.state.margin.top,"px)"));var i=a.select(t.self.current).append("svg").attr("width",t.rect.width).attr("height",t.rect.height).attr("transform","translate(".concat(0,",",-r,")")),n=i.append("g").attr("transform","translate(".concat(t.state.margin.left,",0)"));t.xScale=t.createScaleLiner(t.props.fields.x,[0,e]),t.yScale=t.createScaleLiner(t.props.fields.y,[r,0]),t.radiusScale=t.createScaleLiner(t.props.fields.z,[3,10]);var o=function(){return console.log(i),[a.event.sourceEvent.clientX-i.node().getBoundingClientRect().x-t.state.margin.left,a.event.sourceEvent.clientY-i.node().getBoundingClientRect().y]};n.append("g").attr("transform","translate(0,".concat(r,")")).call(a.axisBottom(t.xScale).tickSize(-r)),n.append("g").call(a.axisLeft(t.yScale).tickSize(-e)),t.brush=a.brush().extent([[0,0],[e,r]]).on("start",function(){t.startPosition=o()}).on("brush",function(){t.endPosition=o(),i.selectAll("rect").remove("rect");var e=Math.min(t.startPosition[0],t.endPosition[0]),r=Math.min(t.startPosition[1],t.endPosition[1]);i.append("rect").attr("position","absolute").attr("x",e+t.state.margin.left).attr("y",r).attr("width",Math.abs(t.endPosition[0]-t.startPosition[0])).attr("height",Math.abs(t.endPosition[1]-t.startPosition[1])).attr("fill","rgba(211, 211, 211, 0.5)")}).on("end",function(){t.endPosition=o(),i.selectAll("rect").remove("rect");var e=Math.min(t.startPosition[0],t.endPosition[0]),r=Math.min(t.startPosition[1],t.endPosition[1]);i.append("rect").attr("position","absolute").attr("x",e+t.state.margin.left).attr("y",r).attr("width",Math.abs(t.endPosition[0]-t.startPosition[0])).attr("height",Math.abs(t.endPosition[1]-t.startPosition[1])).attr("fill","rgba(211, 211, 211, 0.5)"),t.end()}),n.append("g").call(t.brush),t.draw()},100)}},{key:"drawPoint",value:function(t){var e=this.xScale(t[this.props.fields.x]),r=this.yScale(t[this.props.fields.y]),i=this.props.fields.z?this.radiusScale(t[this.props.fields.z]):3;this.context.beginPath(),this.context.arc(e,r,i,0,2*Math.PI),this.context.closePath(),this.context.fill(),this.context.stroke()}},{key:"draw",value:function(){var t=this;this.context=this.canvas.node().getContext("2d"),this.context.clearRect(0,0,this.rect.width,this.rect.height),this.context.fillStyle="#87CEEB",this.context.strokeWidth=1,this.context.strokeStyle="#4682B4",this.context.globalAlpha=1,0===this.props.filters.length?this.state.data.forEach(function(e){t.drawPoint(e)}):this.state.data.forEach(function(e){t.props.filterData.includes(e)?(t.context.fillStyle="#87CEEB",t.context.strokeWidth=1,t.context.strokeStyle="#4682B4",t.context.globalAlpha=1):(t.context.fillStyle="#c0c0c0c0",t.context.strokeWidth=1,t.context.strokeStyle="#000000",t.context.globalAlpha=.2),t.drawPoint(e)})}},{key:"createScaleLiner",value:function(t,e){var r=a.extent(this.state.data,function(e){return e[t]}),i=(r[1]-r[0])*.1;return a.scaleLinear().domain([r[0]-i,r[1]+i]).range(e).nice()}},{key:"end",value:function(){if(a.event.selection){var t=[Math.min(this.startPosition[0],this.endPosition[0]),Math.min(this.startPosition[1],this.endPosition[1])],e=t[0],r=t[1],i=[Math.max(this.startPosition[0],this.endPosition[0]),Math.max(this.startPosition[1],this.endPosition[1])],n=i[0],o=i[1],s=[{id:"".concat(this.props.id,"_x"),title:this.props.title,field:this.props.fields.x,operation:"range",values:[(0,l.numFixed)(this.xScale.invert(e)),(0,l.numFixed)(this.xScale.invert(n))]},{id:"".concat(this.props.id,"_y"),title:this.props.title,field:this.props.fields.y,operation:"range",values:[(0,l.numFixed)(this.yScale.invert(o)),(0,l.numFixed)(this.yScale.invert(r))]}];this.props.filterAdded(s)}}},{key:"render",value:function(){return o.default.createElement("div",{id:this.props.id,ref:this.self,role:"figure",style:{width:"100%",height:"100%"}})}}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=i(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}(o.PureComponent)).propTypes={data:s.default.arrayOf(s.default.shape({})).isRequired,filterData:s.default.arrayOf(s.default.shape({})).isRequired,fields:s.default.shape({x:s.default.string.isRequired,y:s.default.string.isRequired,z:s.default.string}).isRequired,id:s.default.string.isRequired,title:s.default.string.isRequired,filters:s.default.arrayOf(s.default.shape({})).isRequired,filterAdded:s.default.func.isRequired}});
//# sourceMappingURL=ScatterChart.d33f8222.js.map
