var t=globalThis.parcelRequire94c2,e=t.register;e("lOjvX",function(e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var a=f(t("acw62")),o=f(t("9NlP8")),i=l(t("c9Z8w")),u=l(t("bN8Lq"));function l(t){return t&&t.__esModule?t:{default:t}}function s(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(s=function(t){return t?r:e})(t)}function f(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=n(t)&&"function"!=typeof t)return{default:t};var r=s(e);if(r&&r.has(t))return r.get(t);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&({}).hasOwnProperty.call(t,i)){var u=o?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(a,i,u):a[i]=t[i]}return a.default=t,r&&r.set(t,a),a}var c=function(t,e){var r=new Map;return t.forEach(function(t){var n=t[e];Array.isArray(n)?n.forEach(function(t){r.has(t)||r.set(t,0),r.set(t,r.get(t)+1)}):(r.has(n)||r.set(n,0),r.set(n,r.get(n)+1))}),Array.from(r).map(function(t){return{key:t[0],value:t[1]}})},d=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r)return c(t,e);var n=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return o.nest().key(function(t){return t[e]}).sortKeys(function(t,e){return n.compare(t,e)}).rollup(function(t){return t.length}).entries(t)},p=function(t,e){t.each(function(){var t,r=o.select(this),n=r.text().split(/\s+/).reverse(),a=[],i=0,u=r.attr("y"),l=parseFloat(r.attr("dy")),s=r.text(null).append("tspan").attr("x",0).attr("y",u).attr("dy","".concat(l,"em"));for(t=n.pop();t;)a.push(t),s.text(a.join(" ")),s.node().getComputedTextLength()>e&&(a.pop(),s.text(a.join(" ")),a=[t],s=r.append("tspan").attr("x",0).attr("y",u).attr("dy","".concat(1.1*++i+l,"em")).text(t)),t=n.pop()})};function y(t){var e="value",r=d(t.data,t.fields.x,t.fields.isList),n=(0,a.useRef)(),i=(0,a.useRef)(),l=(0,a.useRef)(),s=(0,a.useRef)(),f=function(r,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"og",s=(0,u.default)(n.current,function(t){return"".concat(t.key,": ").concat(t.value)},{x:60,y:0}),f=r.selectAll("rect.".concat(o)).data(a,function(t){return t.key}),c=f.enter().append("rect");return c.attr("class","".concat(o)).attr("x",function(t){return i.current.x(t.key)}).attr("width",i.current.x.bandwidth()).attr("y",l.current).attr("role","graphics-symbol"),c.on("mousemove",s.mousemove).on("mouseleave",s.mouseleave).on("click",function(e){var r,n=c.filter(function(t){return t===e}).data()[0].key,a=null!=t&&null!==(r=t.fields)&&void 0!==r&&r.isList?{id:t.id,title:t.title,field:t.fields.x,operation:"has",values:n}:{id:t.id,title:t.title,field:t.fields.x,operation:"eq",values:n};t.filterAdded([a])}),f.merge(c).transition().duration(1e3).attr("y",function(t){return i.current.y(t[e])}).attr("height",function(t){return l.current-i.current.y(t[e])}),f.exit().transition().duration(1e3).attr("y",l.current).attr("height",0).remove(),f};return(0,a.useEffect)(function(){setTimeout(function(){o.select(n.current).selectAll("svg").remove("svg");var t=n.current.getBoundingClientRect(),a=t.width-35-10,u=t.height-10-35;l.current=u;var c=o.select(n.current).append("svg").attr("width",t.width).attr("height",t.height).attr("role","img");s.current=c.append("g").attr("transform","translate(".concat(35,",").concat(10,")"));var d=o.scaleBand().domain(r.map(function(t){return t.key}).flat()).range([0,a]).padding(.1),y=o.scaleLinear().domain([0,o.max(r,function(t){return t[e]})]).range([u,0]);i.current={x:d,y:y};var v=o.axisBottom(d);s.current.append("g").attr("class","x axis").attr("transform","translate(0,".concat(u,")")).call(v).selectAll(".tick text").call(p,d.bandwidth());var m=o.axisLeft(y).tickSize(-a);s.current.append("g").call(m),f(s.current,r,"og")},100)},[t.layout]),(0,a.useEffect)(function(){setTimeout(function(){var e=[];e=t.filters.length>0?d(t.filterData,t.fields.x,t.fields.isList):r,f(s.current,e,"ft")},100)},[t.filters,t.filterData,t.layout]),a.default.createElement("div",{id:t.id,ref:n,role:"figure",style:{width:"100%",height:"100%"}})}e.exports.default=y,y.propTypes={data:i.default.arrayOf(i.default.shape({})).isRequired,fields:i.default.shape({x:i.default.string.isRequired,isList:i.default.bool}).isRequired,id:i.default.string.isRequired,title:i.default.string.isRequired,filterData:i.default.arrayOf(i.default.shape({})).isRequired,filters:i.default.arrayOf(i.default.shape({})).isRequired,filterAdded:i.default.func.isRequired,layout:i.default.shape({width:i.default.number.isRequired,currentCols:i.default.number.isRequired}).isRequired}}),e("bN8Lq",function(e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var a=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=n(t)&&"function"!=typeof t)return{default:t};var r=o(void 0);if(r&&r.has(t))return r.get(t);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&({}).hasOwnProperty.call(t,u)){var l=i?Object.getOwnPropertyDescriptor(t,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=t[u]}return a.default=t,r&&r.set(t,a),a}(t("9NlP8"));function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(o=function(t){return t?r:e})(t)}e.exports.default=function(t,e,r){var n=a.select(t).append("div").style("opacity",1).attr("class","tooltip").style("display","none").style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");return{mousemove:function(t){n.html(e(t)).style("display","").style("left","".concat(r.x+a.mouse(this)[0],"px")).style("top","".concat(r.y+a.mouse(this)[1],"px"))},mouseleave:function(){n.style("display","none")}}}});
//# sourceMappingURL=BarChart.5290fd2f.js.map
