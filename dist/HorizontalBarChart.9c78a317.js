var e=globalThis.parcelRequire94c2,t=e.register;t("2iOPo",function(t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var i=s(e("acw62")),o=s(e("9NlP8")),u=l(e("c9Z8w")),a=l(e("bN8Lq"));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&({}).hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(i,u,a):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}var c=function(e,t){var r=new Map;return e.forEach(function(e){var n=e[t];Array.isArray(n)?n.forEach(function(e){r.has(e)||r.set(e,0),r.set(e,r.get(e)+1)}):(r.has(n)||r.set(n,0),r.set(n,r.get(n)+1))}),Array.from(r).map(function(e){return{key:e[0],value:e[1]}})},d=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r)return c(e,t);var n=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return o.nest().key(function(e){return e[t]}).sortKeys(function(e,t){return n.compare(e,t)}).rollup(function(e){return e.length}).entries(e)};function y(e){var t="value",r=d(e.data,e.fields.y,e.fields.isList),n=(0,i.useRef)(),u=(0,i.useRef)(),l=(0,i.useRef)(),f=(0,i.useRef)(),s=function(){f.current.selectAll(".label").remove(),f.current.selectAll(".label").data(r,function(e){return e.key}).enter().append("text").attr("class","label").attr("x",5).attr("y",function(e){return u.current.y(e.key)+u.current.y.bandwidth()/2+4}).text(function(e){return e.key}).on("click",function(t){var r={id:e.id,title:e.title,field:e.fields.y,operation:"eq",values:t.key};e.filterAdded([r])})},c=function(r,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"og",l=(0,a.default)(n.current,function(e){return"".concat(e.key,": ").concat(e.value)},{x:30,y:10}),f=r.selectAll("rect.".concat(o)).data(i,function(e){return e.key}),s=f.enter().append("rect");return s.attr("class","".concat(o)).attr("x",0).attr("height",u.current.y.bandwidth()).attr("y",function(e){return u.current.y(e.key)}),s.on("mousemove",l.mousemove).on("mouseleave",l.mouseleave).on("click",function(t){var r,n=s.filter(function(e){return e===t}).data()[0].key,i=null!=e&&null!==(r=e.fields)&&void 0!==r&&r.isList?{id:e.id,title:e.title,field:e.fields.y,operation:"has",values:n}:{id:e.id,title:e.title,field:e.fields.y,operation:"eq",values:n};e.filterAdded([i])}),f.merge(s).transition().duration(1e3).attr("width",function(e){return u.current.x(e[t])}).selectAll(".label").text(function(e){return e.key}),f.exit().transition().duration(1e3).attr("width",0).remove(),f};return(0,i.useEffect)(function(){setTimeout(function(){o.select(n.current).selectAll("svg").remove("svg");var e=n.current.getBoundingClientRect(),i=e.width-10-10,a=e.height-10-35;l.current=a;var d=o.select(n.current).append("svg").attr("width",e.width).attr("height",e.height);f.current=d.append("g").attr("transform","translate(".concat(10,",").concat(10,")"));var y=o.scaleLinear().domain([0,o.max(r,function(e){return e[t]})]).range([0,i]),p=o.scaleBand().domain(r.map(function(e){return e.key})).range([a,0]).padding(.1);u.current={x:y,y:p},f.current.append("g").attr("transform","translate(0,".concat(a,")")).call(o.axisBottom(y).tickSize(-a)),c(f.current,r,"og"),s()},100)},[e.layout]),(0,i.useEffect)(function(){setTimeout(function(){var t=[];t=e.filters.length>0?d(e.filterData,e.fields.y,e.fields.isList):r,c(f.current,t,"ft"),s()},100)},[e.filters,e.filterData,e.layout]),i.default.createElement("div",{id:e.id,ref:n,role:"figure",style:{width:"100%",height:"100%"}})}t.exports.default=y,y.propTypes={data:u.default.arrayOf(u.default.shape({})).isRequired,fields:u.default.shape({y:u.default.string.isRequired,isList:u.default.bool}).isRequired,id:u.default.string.isRequired,title:u.default.string.isRequired,filterData:u.default.arrayOf(u.default.shape({})).isRequired,filters:u.default.arrayOf(u.default.shape({})).isRequired,filterAdded:u.default.func.isRequired,layout:u.default.shape({width:u.default.number.isRequired,currentCols:u.default.number.isRequired}).isRequired}}),t("bN8Lq",function(t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var i={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var l=u?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}(e("9NlP8"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}t.exports.default=function(e,t,r){var n=i.select(e).append("div").style("opacity",1).attr("class","tooltip").style("display","none").style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");return{mousemove:function(e){n.html(t(e)).style("display","").style("left","".concat(r.x+i.mouse(this)[0],"px")).style("top","".concat(r.y+i.mouse(this)[1],"px"))},mouseleave:function(){n.style("display","none")}}}});
//# sourceMappingURL=HorizontalBarChart.9c78a317.js.map
