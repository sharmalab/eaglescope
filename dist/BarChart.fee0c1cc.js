function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,i){Object.defineProperty(e,t,{get:r,set:i,enumerable:!0,configurable:!0})}var r=globalThis.parcelRequire94c2,i=r.register;i("lOjvX",function(i,a){Object.defineProperty(i.exports,"__esModule",{value:!0,configurable:!0}),t(i.exports,"default",()=>f);var s=r("acw62"),l=r("9NlP8"),n=r("c9Z8w"),o=r("bN8Lq");let u=(e,t)=>{let r=new Map;return e.forEach(e=>{let i=e[t];Array.isArray(i)?i.forEach(e=>{r.has(e)||r.set(e,0),r.set(e,r.get(e)+1)}):(r.has(i)||r.set(i,0),r.set(i,r.get(i)+1))}),Array.from(r).map(e=>({key:e[0],value:e[1]}))},d=(e,t,r=!1)=>{if(r)return u(e,t);let i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return l.nest().key(e=>e[t]).sortKeys(function(e,t){return i.compare(e,t)}).rollup(e=>e.length).entries(e)},c=(e,t)=>{e.each(function(){let e;let r=l.select(this),i=r.text().split(/\s+/).reverse(),a=[],s=0,n=r.attr("y"),o=parseFloat(r.attr("dy")),u=r.text(null).append("tspan").attr("x",0).attr("y",n).attr("dy",`${o}em`);for(e=i.pop();e;)a.push(e),u.text(a.join(" ")),u.node().getComputedTextLength()>t&&(a.pop(),u.text(a.join(" ")),a=[e],u=r.append("tspan").attr("x",0).attr("y",n).attr("dy",`${1.1*++s+o}em`).text(e)),e=i.pop()})};function p(t){let r="value",i=d(t.data,t.fields.x,t.fields.isList),a=(0,s.useRef)(),n=(0,s.useRef)(),u=(0,s.useRef)(),p=(0,s.useRef)(),f=(e,t)=>l.scaleBand().domain(i.map(t=>t[e]).flat()).range([0,t]).padding(.1),y=(e,t)=>l.scaleLinear().domain([0,l.max(i,t=>t[e])]).range([t,0]),h=(e,i,s="og")=>{let l=(0,o.default)(a.current,e=>`${e.key}: ${e.value}`,{x:60,y:0}),d=e.selectAll(`rect.${s}`).data(i,e=>e.key),c=d.enter().append("rect");return c.attr("class",`${s}`).attr("x",e=>n.current.x(e.key)).attr("width",n.current.x.bandwidth()).attr("y",u.current).attr("role","graphics-symbol"),c.on("mousemove",l.mousemove).on("mouseleave",l.mouseleave).on("click",e=>{let r=c.filter(t=>t===e).data()[0].key,i=t?.fields?.isList?{id:t.id,title:t.title,field:t.fields.x,operation:"has",values:r}:{id:t.id,title:t.title,field:t.fields.x,operation:"eq",values:r};t.filterAdded([i])}),d.merge(c).transition().duration(1e3).attr("y",e=>n.current.y(e[r])).attr("height",e=>u.current-n.current.y(e[r])),d.exit().transition().duration(1e3).attr("y",u.current).attr("height",0).remove(),d};return(0,s.useEffect)(()=>{setTimeout(()=>{l.select(a.current).selectAll("svg").remove("svg");let e=a.current.getBoundingClientRect(),t=e.width-35-10,s=e.height-10-35;u.current=s;let o=l.select(a.current).append("svg").attr("width",e.width).attr("height",e.height).attr("role","img");p.current=o.append("g").attr("transform","translate(35,10)");let d=f("key",t),g=y(r,s);n.current={x:d,y:g};let m=l.axisBottom(d);p.current.append("g").attr("class","x axis").attr("transform",`translate(0,${s})`).call(m).selectAll(".tick text").call(c,d.bandwidth());let x=l.axisLeft(g).tickSize(-t);p.current.append("g").call(x),h(p.current,i,"og")},100)},[t.layout]),(0,s.useEffect)(()=>{setTimeout(()=>{let e=[];e=t.filters.length>0?d(t.filterData,t.fields.x,t.fields.isList):i,h(p.current,e,"ft")},100)},[t.filters,t.filterData,t.layout]),e(s).createElement("div",{id:t.id,ref:a,role:"figure",style:{width:"100%",height:"100%"}})}var f=p;p.propTypes={data:e(n).arrayOf(e(n).shape({})).isRequired,fields:e(n).shape({x:e(n).string.isRequired,isList:e(n).bool}).isRequired,id:e(n).string.isRequired,title:e(n).string.isRequired,filterData:e(n).arrayOf(e(n).shape({})).isRequired,filters:e(n).arrayOf(e(n).shape({})).isRequired,filterAdded:e(n).func.isRequired,layout:e(n).shape({width:e(n).number.isRequired,currentCols:e(n).number.isRequired}).isRequired}}),i("bN8Lq",function(e,i){t(e.exports,"default",()=>s);var a=r("9NlP8"),s=function(e,t,r){let i=a.select(e).append("div").style("opacity",1).attr("class","tooltip").style("display","none").style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");return{mousemove:function(e){i.html(t(e)).style("display","").style("left",`${r.x+a.mouse(this)[0]}px`).style("top",`${r.y+a.mouse(this)[1]}px`)},mouseleave:function(){i.style("display","none")}}}});
//# sourceMappingURL=BarChart.fee0c1cc.js.map
