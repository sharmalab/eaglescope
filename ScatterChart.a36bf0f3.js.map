{"version":3,"sources":["components/VisualTools/Chart/ScatterChart.js"],"names":["_react","_interopRequireWildcard","require","d3","_propTypes","_interopRequireDefault","_utils","obj","__esModule","default","_getRequireWildcardCache","e","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","_typeof","o","Symbol","iterator","constructor","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","enumerable","configurable","writable","_toPropertyKey","key","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","Number","_inherits","subClass","superClass","create","value","_setPrototypeOf","p","setPrototypeOf","bind","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","_getPrototypeOf","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","getPrototypeOf","ScatterChart","exports","_PureComponent","PureComponent","_super","_this","React","createRef","state","margin","top","right","bottom","left","data","filter","d","fields","x","y","z","componentDidUpdate","_this2","setTimeout","select","current","selectAll","remove","rect","getBoundingClientRect","innerWidth","width","innerHeight","height","canvas","append","attr","style","concat","svg","viewer","xScale","createScaleLiner","yScale","radiusScale","getCurrentMouseClickPosition","console","log","event","sourceEvent","clientX","node","clientY","axisBottom","tickSize","axisLeft","brush","extent","on","startPosition","endPosition","startX","Math","min","startY","abs","end","draw","point","cx","cy","context","beginPath","arc","PI","closePath","fill","stroke","_this3","getContext","clearRect","fillStyle","strokeWidth","strokeStyle","globalAlpha","filters","forEach","drawPoint","filterData","includes","f","range","domainExtent","domainPadding","scaleLinear","domain","nice","selection","_ref","x0","y0","_ref2","max","x1","y1","id","title","field","operation","values","numFixed","invert","filterAdded","createElement","ref","propTypes","PropTypes","arrayOf","shape","isRequired","string","func"],"mappings":"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","file":"ScatterChart.a36bf0f3.js","sourceRoot":"../source","sourcesContent":["import React, { PureComponent } from 'react';\nimport * as d3 from 'd3';\nimport PropTypes from 'prop-types';\nimport { numFixed } from '../../../common/utils';\n\nexport default class ScatterChart extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.self = React.createRef();\n    this.state = {\n      margin: {\n        top: 5,\n        right: 10,\n        bottom: 25,\n        left: 25,\n      },\n    };\n    this.state.data = this.props.data.filter(\n      (d) => d[this.props.fields.x] !== 'N/A'\n        && d[this.props.fields.y] !== 'N/A'\n        && d[this.props.fields.z] !== 'N/A',\n    );\n  }\n\n  componentDidMount() {\n    this.componentDidUpdate();\n  }\n\n  componentDidUpdate() {\n    setTimeout(() => {\n      d3.select(this.self.current).selectAll('canvas').remove('canvas');\n      d3.select(this.self.current).selectAll('svg').remove('svg');\n      this.rect = this.self.current.getBoundingClientRect();\n      const innerWidth = this.rect.width - this.state.margin.left - this.state.margin.right;\n      const innerHeight = this.rect.height - this.state.margin.top - this.state.margin.bottom;\n\n      this.canvas = d3\n        .select(this.self.current)\n        .append('canvas')\n        .attr('width', innerWidth)\n        .attr('height', innerHeight)\n        .style('transform', `translate(${this.state.margin.left}px,${this.state.margin.top}px)`);\n\n      // create svg\n      const svg = d3\n        .select(this.self.current)\n        .append('svg')\n        .attr('width', this.rect.width)\n        .attr('height', this.rect.height)\n        .attr('transform', `translate(${0},${-innerHeight})`);\n\n      // create viewer\n      const viewer = svg\n        .append('g')\n        .attr('transform', `translate(${this.state.margin.left},0)`);\n\n      //\n      this.xScale = this.createScaleLiner(this.props.fields.x, [0, innerWidth]);\n      this.yScale = this.createScaleLiner(this.props.fields.y, [innerHeight, 0]);\n      this.radiusScale = this.createScaleLiner(this.props.fields.z, [3, 10]);\n      const getCurrentMouseClickPosition = () => {\n        console.log(svg);\n        const mouseX = d3.event.sourceEvent.clientX - svg.node().getBoundingClientRect().x\n        - this.state.margin.left;\n        const mouseY = d3.event.sourceEvent.clientY - svg.node().getBoundingClientRect().y;\n        return [mouseX, mouseY];\n      };\n      viewer\n        .append('g')\n        .attr('transform', `translate(0,${innerHeight})`)\n        .call(d3.axisBottom(this.xScale).tickSize(-innerHeight));\n\n      // add the y Axis\n      viewer.append('g').call(d3.axisLeft(this.yScale).tickSize(-innerWidth));\n\n      this.brush = d3\n        .brush()\n        .extent([\n          [0, 0],\n          [innerWidth, innerHeight],\n        ]).on('start', () => {\n          this.startPosition = getCurrentMouseClickPosition();\n        }).on('brush', () => {\n          this.endPosition = getCurrentMouseClickPosition();\n          svg.selectAll('rect').remove('rect');\n          const startX = Math.min(this.startPosition[0], this.endPosition[0]);\n          const startY = Math.min(this.startPosition[1], this.endPosition[1]);\n          const selectedArea = svg.append('rect')\n            .attr('position', 'absolute')\n            .attr('x', startX + this.state.margin.left)\n            .attr('y', startY)\n            .attr('width', Math.abs(this.endPosition[0] - this.startPosition[0]))\n            .attr('height', Math.abs(this.endPosition[1] - this.startPosition[1]))\n            .attr('fill', 'rgba(211, 211, 211, 0.5)');\n        })\n        .on('end', () => {\n          this.endPosition = getCurrentMouseClickPosition();\n          svg.selectAll('rect').remove('rect');\n          const startX = Math.min(this.startPosition[0], this.endPosition[0]);\n          const startY = Math.min(this.startPosition[1], this.endPosition[1]);\n          const selectedArea = svg.append('rect')\n            .attr('position', 'absolute')\n            .attr('x', startX + this.state.margin.left)\n            .attr('y', startY)\n            .attr('width', Math.abs(this.endPosition[0] - this.startPosition[0]))\n            .attr('height', Math.abs(this.endPosition[1] - this.startPosition[1]))\n            .attr('fill', 'rgba(211, 211, 211, 0.5)');\n          this.end();\n        });\n\n      viewer.append('g').call(this.brush);\n\n      this.draw();\n    }, 100);\n  }\n\n  drawPoint(point) {\n    const cx = this.xScale(point[this.props.fields.x]);\n    const cy = this.yScale(point[this.props.fields.y]);\n    const r = this.props.fields.z ? this.radiusScale(point[this.props.fields.z]) : 3;\n\n    this.context.beginPath();\n    this.context.arc(cx, cy, r, 0, 2 * Math.PI);\n    this.context.closePath();\n    this.context.fill();\n    this.context.stroke();\n  }\n\n  draw() {\n    this.context = this.canvas.node().getContext('2d');\n    this.context.clearRect(0, 0, this.rect.width, this.rect.height);\n    this.context.fillStyle = '#87CEEB';\n    this.context.strokeWidth = 1;\n    this.context.strokeStyle = '#4682B4';\n    this.context.globalAlpha = 1;\n\n    if (this.props.filters.length === 0) {\n      this.state.data.forEach((point) => {\n        this.drawPoint(point);\n      });\n    } else {\n      this.state.data.forEach((point) => {\n        if (this.props.filterData.includes(point)) {\n          this.context.fillStyle = '#87CEEB';\n          this.context.strokeWidth = 1;\n          this.context.strokeStyle = '#4682B4';\n          this.context.globalAlpha = 1;\n        } else {\n          this.context.fillStyle = '#c0c0c0c0';\n          this.context.strokeWidth = 1;\n          this.context.strokeStyle = '#000000';\n          this.context.globalAlpha = 0.2;\n        }\n        this.drawPoint(point);\n      });\n    }\n  }\n\n  createScaleLiner(f, range) {\n    const paddingPercent = 0.1; // Adjust the percentage of padding as needed\n    const domainExtent = d3.extent(this.state.data, (d) => d[f]);\n    const domainPadding = (domainExtent[1] - domainExtent[0]) * paddingPercent;\n    const scaleLiner = d3\n      .scaleLinear()\n      .domain([domainExtent[0] - domainPadding,\n        domainExtent[1] + domainPadding])\n      .range(range)\n      .nice();\n    return scaleLiner;\n  }\n\n  end() {\n    if (!d3.event.selection) return;\n\n    const [x0, y0] = [Math.min(this.startPosition[0], this.endPosition[0]),\n      Math.min(this.startPosition[1], this.endPosition[1])];\n    const [x1, y1] = [Math.max(this.startPosition[0], this.endPosition[0]),\n      Math.max(this.startPosition[1], this.endPosition[1])];\n\n    const filters = [\n      {\n        id: `${this.props.id}_x`,\n        title: this.props.title,\n        field: this.props.fields.x,\n        operation: 'range',\n        values: [numFixed(this.xScale.invert(x0)), numFixed(this.xScale.invert(x1))],\n      },\n      {\n        id: `${this.props.id}_y`,\n        title: this.props.title,\n        field: this.props.fields.y,\n        operation: 'range',\n        values: [numFixed(this.yScale.invert(y1)), numFixed(this.yScale.invert(y0))],\n      },\n    ];\n    this.props.filterAdded(filters);\n  }\n\n  render() {\n    return (\n      <div id={this.props.id} ref={this.self} style={{ width: '100%', height: '100%' }} />\n    );\n  }\n}\n\nScatterChart.propTypes = {\n  data: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  filterData: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  fields: PropTypes.shape({\n    x: PropTypes.string.isRequired,\n    y: PropTypes.string.isRequired,\n    z: PropTypes.string,\n  }).isRequired,\n  id: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  filters: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  filterAdded: PropTypes.func.isRequired,\n};\n"]}