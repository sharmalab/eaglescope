function e(e){return e&&e.__esModule?e.default:e}function t(e,t,i,r){Object.defineProperty(e,t,{get:i,set:r,enumerable:!0,configurable:!0})}var i=globalThis.parcelRequire94c2,r=i.register;r("fd07Q",function(r,l){Object.defineProperty(r.exports,"__esModule",{value:!0,configurable:!0}),t(r.exports,"default",()=>c);var s=i("ayMG0"),a=i("acw62"),d=i("9NlP8"),n=i("c9Z8w"),o=i("63tWu"),u=i("bN8Lq");function f(e){let t=(0,a.useRef)(),i={x:d.scaleBand(),y:d.scaleBand(),color:d.scaleSequential()},r=d.map(e.data,t=>t[e.fields.x]).keys(),l=d.map(e.data,t=>t[e.fields.y]).keys();return(0,a.useEffect)(()=>{setTimeout(()=>{d.select(t.current).select(".tooltip").remove("div"),d.select(t.current).selectAll("svg").remove("svg");let s=t.current.getBoundingClientRect(),a=s.width-60-10,n=s.height-10-30,{data:f}=e;0!==e.filters.length&&(f=e.filterData);let c=d.select(t.current).append("svg").attr("width",s.width).attr("height",s.height).append("g").attr("transform","translate(60,10)");i.x.range([0,a]).domain(r).padding(.05),c.append("g").style("font-size",13).attr("transform",`translate(0,${n})`).call(d.axisBottom(i.x).tickSize(0)).select(".domain").remove(),i.y.range([n,0]).domain(l).padding(.05),c.append("g").style("font-size",13).call(d.axisLeft(i.y).tickSize(0)).select(".domain").remove(),i.color.interpolator(d.interpolateInferno).domain(d.extent(e.data,t=>t[e.fields.z]));let p=(0,u.default)(t.current,t=>`The ${e.fields.z} of this 
      cell is: ${(0,o.numFixed)(t.z?t.z:0)}`,{x:80,y:0}),y=[];r.forEach(t=>l.forEach(i=>{let r=f.filter(r=>r[e.fields.x]===t&&r[e.fields.y]===i);y.push({g:t,v:i,z:d.mean(r,t=>t[e.fields.z])})})),c.selectAll().data(y,e=>`${e.g}:${e.v}`).enter().append("rect").attr("x",e=>i.x(e.g)).attr("y",e=>i.y(e.v)).attr("rx",4).attr("ry",4).attr("width",i.x.bandwidth()).attr("height",i.y.bandwidth()).style("fill",e=>i.color(e.z)).style("stroke-width",4).style("stroke","none").style("opacity",.8).on("mousemove",p.mousemove).on("mouseleave",p.mouseleave).on("click",t=>{let i=[{id:`${e.id}_x`,title:e.title,field:e.fields.x,operation:"in",values:[t.g]},{id:`${e.id}_y`,title:e.title,field:e.fields.y,operation:"in",values:[t.v]}];e.filterAdded(i)})},100)},[e.layout,e.filters,e.filterData]),(0,s.jsx)("div",{id:e.id,ref:t,role:"figure",style:{width:"100%",height:"100%"}})}var c=f;f.propTypes={id:e(n).string.isRequired,title:e(n).string.isRequired,data:e(n).arrayOf(e(n).shape({})).isRequired,fields:e(n).shape({x:e(n).string.isRequired,y:e(n).string.isRequired,z:e(n).string.isRequired}).isRequired,filterData:e(n).arrayOf(e(n).shape({})).isRequired,filters:e(n).arrayOf(e(n).shape({})).isRequired,layout:e(n).shape({width:e(n).number.isRequired,currentCols:e(n).number.isRequired}).isRequired,filterAdded:e(n).func.isRequired}}),r("bN8Lq",function(e,r){t(e.exports,"default",()=>s);var l=i("9NlP8"),s=function(e,t,i){let r=l.select(e).append("div").style("opacity",1).attr("class","tooltip").style("display","none").style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");return{mousemove:function(e){r.html(t(e)).style("display","").style("left",`${i.x+l.mouse(this)[0]}px`).style("top",`${i.y+l.mouse(this)[1]}px`)},mouseleave:function(){r.style("display","none")}}}});
//# sourceMappingURL=Heatmap.1d6a2de2.js.map
